(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={app:0},n=[];function r(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"c46328a4"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=i[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=i[e]=[t,a]}));t.push(s[2]=a);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(e);var l=new Error;n=function(t){c.onerror=c.onload=null,clearTimeout(u);var s=i[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",l.name="ChunkLoadError",l.type=a,l.request=n,s[1](l)}i[e]=void 0}};var u=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/openemr/interface/modules/custom_modules/oe-mi-messages/client/dist/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"073d":function(e,t,s){"use strict";var a=s("0efb"),i=s.n(a);i.a},"0944":function(e,t,s){"use strict";var a=s("3274"),i=s.n(a);i.a},"0efb":function(e,t,s){},1:function(e,t){},"123d":function(e,t,s){},"17f1":function(e,t,s){},2:function(e,t){},"2d60":function(e,t,s){"use strict";var a=s("d5ef"),i=s.n(a);i.a},3:function(e,t){},3274:function(e,t,s){},3694:function(e,t,s){"use strict";var a=s("17f1"),i=s.n(a);i.a},"3b82":function(e,t,s){},"3bc2":function(e,t,s){"use strict";var a=s("a913"),i=s.n(a);i.a},"3cc2":function(e,t,s){},4:function(e,t){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=n,e.exports=i,i.id="4678"},4907:function(e,t,s){"use strict";var a=s("d828"),i=s.n(a);i.a},"494d":function(e,t,s){"use strict";var a=s("3cc2"),i=s.n(a);i.a},"4b0f":function(e,t,s){"use strict";var a=s("123d"),i=s.n(a);i.a},5:function(e,t){},5033:function(e){e.exports=JSON.parse('{"userState":{"openTabs":{},"activeFilter":"1","showNew":false},"teams":{"1":{"name":"intern-group","faIcon":"fa-hashtag","messages":{"102":"102"},"users":{"1":"1","2":"2"},".key":"1"}},"messageFilters":{"1":{"messages":{"100":"100","101":"101","102":"102"},"name":"Inbox","type":"filter","faIcon":"fa-inbox",".key":"1"},"2":{"messages":{"101":"101"},"name":"Sent","type":"filter","faIcon":"fa-paper-plane",".key":"2"},"3":{"messages":{},"name":"Upcoming","type":"filter","faIcon":"fa-clock",".key":"3"},"4":{"messages":{},"name":"Archive","type":"filter","faIcon":"fa-archive",".key":"4"},"5":{"messages":{},"name":"Files","type":"filter","faIcon":"fa-file",".key":"5"}},"messageTools":{"1":{"name":"Configure","faIcon":"fa-cog",".key":"1"}},"tags":{"balloons":{"name":"balloons",".key":"balloons"},"games":{"name":"games",".key":"games"}},"files":{"2000":{"name":"Patient_3000.pdf","type":"pdf","url":"http://Patient_3000.pdf",".key":"2000"}},"messages":{"100":{"subject":"Announcements","body":"Important announcements about the forum.","type":"message","isRead":false,"status":"new","assignable":false,"assignedTo":null,"replies":{"150":"150","151":"151"},"forwards":{},"viewers":{},"recipients":{"users":{"2":"2","3":"3"},"teams":{}},"tags":{"balloons":"baloons","games":"games"},"attachments":{},"userId":"1","createdAt":1589811377,".key":"100"},"101":{"subject":"Cats","body":"There is a cat outside.","type":"message","isRead":true,"status":"complete","assignable":true,"assignedTo":null,"replies":{},"forwards":{},"viewers":{"3":"3"},"recipients":{"users":{"3":"3"},"teams":{}},"attachments":{"2000":"2000"},"tags":{},"userId":"1","createdAt":1504040497,".key":"101"},"102":{"subject":"Take out the trash","body":"Will somebody please take out the trash?","type":"message","isRead":true,"status":"new","assignable":true,"assignedTo":"1","viewers":{},"replies":{},"forwards":{},"recipients":{"users":{"1":"1","2":"2","3":"3","4":"4"},"teams":{"1":"1"}},"attachments":{"2000":"2000"},"tags":{},"userId":"1","createdAt":1504040497,".key":"102"}},"replies":{"150":{"body":"Reply to announcements about the forum.","type":"reply","parentId":"100","forwards":{},"attachments":{},"tags":{},"userId":"4","createdAt":1504040497,".key":"150"},"151":{"body":"I can\'t there are cats outside!!!!!","type":"reply","parentId":"100","forwards":{},"attachments":{},"tags":{},"userId":"2","createdAt":1504040497,".key":"151"}},"users":{"1":{"avatar":"https://avatars3.githubusercontent.com/u/2327556?v=4&s=460","email":"chrisvfritz@gmail.com","lastVisitAt":1504772078,"name":"Chris Fritz","registeredAt":1504632260,"username":"chrisvfritz","usernameLower":"chrisvfritz",".key":"1"},"2":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Ftunajoe?alt=media&token=dcc2eb1d-81a5-4e82-8774-bb97be7c3128","bio":"Love to fish. Work to fish","email":"tunajoe@gmail.com","lastVisitAt":1507227517,"name":"Joey Williams","posts":{"-Kvd3TvfJogbWreitADe":"-Kvd3TvfJogbWreitADe","-KvdBp4adHJpppQWc3sJ":"-KvdBp4adHJpppQWc3sJ","-KvdDmJtvxFMHECuKKLX":"-KvdDmJtvxFMHECuKKLX","-KvdFbzM8tu64CKVW60V":"-KvdFbzM8tu64CKVW60V","-KvfyDwSUGBojOO4OKyY":"-KvfyDwSUGBojOO4OKyY","-KvgM0hiRDPqJzuJgnLv":"-KvgM0hiRDPqJzuJgnLv","-KvgOAeYDKON22qBjHWR":"-KvgOAeYDKON22qBjHWR","-KvgWFVq1pX_QbFmlG-5":"-KvgWFVq1pX_QbFmlG-5","-KvgWYb4YkaFCfCzA_Ck":"-KvgWYb4YkaFCfCzA_Ck","-KvgbTO3-L9eOTzrxhs3":"-KvgbTO3-L9eOTzrxhs3","-KvgeSqPO7yMjOPbSYB2":"-KvgeSqPO7yMjOPbSYB2"},"registeredAt":1507148598,"threads":{"-Kvd3TvfJogbWreitADd":"-Kvd3TvfJogbWreitADd","-KvdBp4adHJpppQWc3sI":"-KvdBp4adHJpppQWc3sI","-KvdDmJtvxFMHECuKKLW":"-KvdDmJtvxFMHECuKKLW","-KvfyDwSUGBojOO4OKyX":"-KvfyDwSUGBojOO4OKyX","-KvgOAeYDKON22qBjHWQ":"-KvgOAeYDKON22qBjHWQ","-KvgWYb4YkaFCfCzA_Cj":"-KvgWYb4YkaFCfCzA_Cj","-KvgeSqPO7yMjOPbSYB1":"-KvgeSqPO7yMjOPbSYB1"},"username":"tunajoe","usernameLower":"tunajoe",".key":"2"},"3":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Frah?alt=media&token=7ad21914-a4f4-4ad0-add6-17e6d3ae9679","bio":"Now this is a story all about how my life got flipped-turned upside down and I\'d like to take a minute just sit right there i\'ll tell you how I became the prince of a town called Bel-Air.","email":"rolf@rah.no","lastVisitAt":1509628794,"name":"Rolf","posts":{"-KsjWehQ--apjDBwSBCZ":"-KsjWehQ--apjDBwSBCZ","-KvcmrN1WpXOUp1yWrJd":"-KvcmrN1WpXOUp1yWrJd","-KvdFThKmnsu9kXOlS3N":"-KvdFThKmnsu9kXOlS3N","-KvdFe4GnBBURhuRY5OZ":"-KvdFe4GnBBURhuRY5OZ","-KvgjI6bfbWYlbYV5nds":"-KvgjI6bfbWYlbYV5nds"},"registeredAt":1504025541,"threads":{"-KsjWehQ--apjDBwSBCY":"-KsjWehQ--apjDBwSBCY","-KvcmrN1WpXOUp1yWrJc":"-KvcmrN1WpXOUp1yWrJc","-KvgjI6bfbWYlbYV5ndr":"-KvgjI6bfbWYlbYV5ndr"},"twitter":"rahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaug","username":"rah","usernameLower":"rah","website":"http://rah.no",".key":"3"},"4":{"avatar":"http://i0.kym-cdn.com/photos/images/facebook/000/010/934/46623-batman_pikachu_super.png","bio":"I\'m Batman!","email":"man@batmail.com","lastVisitAt":1509978791,"name":"Bruce Wayne","posts":{"-KsjnAAjzfpznUVh4DSa":"-KsjnAAjzfpznUVh4DSa","-KsjrmB3IBCu-u-09qQb":"-KsjrmB3IBCu-u-09qQb","-KsjtRwwzHCcV55pKaQ-":"-KsjtRwwzHCcV55pKaQ-","-KsjxMazDmuyf0VMVbCG":"-KsjxMazDmuyf0VMVbCG","-Kvcpl2lxtVztykr82Bv":"-Kvcpl2lxtVztykr82Bv","-Kvd-w-TTMc3Wj-U5JFx":"-Kvd-w-TTMc3Wj-U5JFx","-KvgTpPYkAoq8WoSz46g":"-KvgTpPYkAoq8WoSz46g","-Kvhg7cQD_anWm8x-WYT":"-Kvhg7cQD_anWm8x-WYT","-KvhjGrRB9SpbH67jqbq":"-KvhjGrRB9SpbH67jqbq"},"registeredAt":1504038930,"username":"batman","usernameLower":"batman",".key":"4"},"NnooaWj4KHVxbhKwO1pEdfaQDsD2":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Fraynathan?alt=media&token=bd9a0f0e-60f2-4e60-b092-77d1ded50a7e","email":"raynathan@gmail.com","lastVisitAt":1507312801,"name":"Ray-Nathan James","posts":{"-Kvfw0huq0j2O00bOiWd":"-Kvfw0huq0j2O00bOiWd","-KvfyiF5JP_DJ4HwRhRd":"-KvfyiF5JP_DJ4HwRhRd","-Kvfz9EMh1i8uvLRrEGz":"-Kvfz9EMh1i8uvLRrEGz","-KvgMqM-1LXi7MqOHGvv":"-KvgMqM-1LXi7MqOHGvv","-KvggPpwnevwqHunhXy9":"-KvggPpwnevwqHunhXy9","-KvggXxCEyQQlq6Z3gn0":"-KvggXxCEyQQlq6Z3gn0","-KvggzbFFFwafR2UV2PP":"-KvggzbFFFwafR2UV2PP","-Kvgi7kwtMGggjy3hRPO":"-Kvgi7kwtMGggjy3hRPO","-Kvhfofql-5yAv3TxH2M":"-Kvhfofql-5yAv3TxH2M","-KvhhwVAy5847Uvyw6rT":"-KvhhwVAy5847Uvyw6rT"},"registeredAt":1507196808,"threads":{"-Kvfz9ELFDiz_50c1axQ":"-Kvfz9ELFDiz_50c1axQ","-KvggPpwnevwqHunhXy8":"-KvggPpwnevwqHunhXy8","-KvggzbFFFwafR2UV2PO":"-KvggzbFFFwafR2UV2PO","-Kvgi7kwtMGggjy3hRPN":"-Kvgi7kwtMGggjy3hRPN","-KvhfofpGQZDLljV52k4":"-KvhfofpGQZDLljV52k4"},"username":"raynathan","usernameLower":"raynathan",".key":"NnooaWj4KHVxbhKwO1pEdfaQDsD2"}}}')},"55aa":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"main-window"},[s("TheAppMenu"),s("div",{staticClass:"flex-container"},[s("router-view")],1)],1)])},n=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticStyle:{display:"none"},attrs:{id:"app-menu"}},[s("ul",{staticClass:"list-unstyled components mb-5"},[e._m(0),s("li",{staticClass:"active"},[s("router-link",{attrs:{to:{name:"PageMessages"}}},[s("span",{staticClass:"fa fa-mail-bulk"}),e._v(" Messages")])],1),e._m(1),e._m(2),e._m(3)])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"active"},[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-home"}),e._v(" Home")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-user"}),e._v(" Profile")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-file-invoice-dollar"}),e._v(" Billing")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-cogs"}),e._v(" Settings")])])}],c={name:"TheAppMenu"},l=c,u=s("2877"),m=Object(u["a"])(l,r,o,!1,null,"876964f2",null),d=m.exports,f={components:{TheAppMenu:d}},p=f,h=(s("5c0b"),Object(u["a"])(p,i,n,!1,null,null,null)),g=h.exports,v=(s("d3b7"),s("8c4f")),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"messages"}},[s("TheMessageTabBar",{attrs:{openMessages:e.openMessages}}),s("div",{staticClass:"flex-container mx-2222"},[s("TheMessageSidebar"),s("div",{staticClass:"container-fluid",attrs:{id:"message-content-area"}},[s("router-view")],1)],1)],1)},y=[],j=(s("4de4"),s("07ac"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-bar-row"},[s("nav",{staticClass:"navbar navbar-expand-md tab-bar"},[s("ul",{staticClass:"navbar-nav"},[e.showNew?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"PageMessageCreate"}}},[s("div",{staticClass:"d-flex"},[s("span",[e._v("New")]),s("span",{staticClass:"d-flex align-content-center p-2"},[s("a",{staticClass:"tab-new",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-plus"})])])])])],1):e._e(),e._l(e.openMessages,(function(e){return s("TabItem",{key:e[".key"],attrs:{tabbedMessage:e}})}))],2)])])}),k=[],C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"PageMessageView",params:{messageId:this.tabbedMessage[".key"]}}}},[s("div",{staticClass:"d-flex"},[s("span",{staticClass:"d-flex p-2"},[s("i",{staticClass:"fa fa-envelope"})]),s("span",[e._v(e._s(this.tabbedMessage.subject))]),s("span",{staticClass:"d-flex align-content-center p-2"},[s("a",{staticClass:"tab-closer",on:{click:function(t){return t.preventDefault(),e.closeMessage(t)}}},[s("i",{staticClass:"fa fa-times"})])])])])],1)},_=[],I=(s("b0c0"),{name:"TabItem",props:{tabbedMessage:{required:!0,type:Object}},methods:{closeMessage:function(){this.$store.dispatch("closeMessage",this.tabbedMessage),"PageMessageView"===this.$route.name&&parseInt(this.$route.params.messageId,10)===parseInt(this.tabbedMessage[".key"],10)&&(this.$router.go(-1),this.$emit("tabClosed",this.tabbedMessage[".key"]))}}}),M=I,w=(s("c268"),Object(u["a"])(M,C,_,!1,null,"18d01814",null)),O=w.exports,A={name:"TheMessageTabBar",components:{TabItem:O},props:{openMessages:{required:!0,type:Array}},computed:{showNew:function(){return this.$store.state.userState.showNew}}},F=A,S=(s("073d"),Object(u["a"])(F,j,k,!1,null,"248a2422",null)),x=S.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{attrs:{id:"sidebar"}},[e._m(0),s("MessageFilterList",{attrs:{messageFilters:e.messageFilters}}),s("div",{staticClass:"message-list-header-item"},[e._v("Teams")]),s("MessageFilterList",{attrs:{messageFilters:e.teams}})],1)},K=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar navbar-expand-md message-list-controls"},[s("h1",[e._v("Folders")])])}],$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-unstyled components"},e._l(e.messageFilters,(function(e){return s("MessageFilterListItem",{key:e[".key"],attrs:{messageFilter:e}})})),1)},P=[],E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"message-filter-list-item"},[s("router-link",{attrs:{to:{name:"PageMessageListView",params:{listId:e.messageFilter[".key"]}}}},[s("span",{staticClass:"fa mr-3",class:e.messageFilter.faIcon}),e._v(" "+e._s(e.messageFilter.name)+" ")])],1)},D=[],R={name:"MessageFilterListItem",props:{messageFilter:{required:!0,type:Object}}},L=R,z=Object(u["a"])(L,E,D,!1,null,"c6efd804",null),q=z.exports,W={name:"MessageFilterList",components:{MessageFilterListItem:q},props:{messageFilters:{required:!0,type:Array}}},V=W,B=Object(u["a"])(V,$,P,!1,null,"02a8001e",null),U=B.exports,Y={name:"TheMessageSidebar",components:{MessageFilterList:U},computed:{teams:function(){return Object.values(this.$store.state.messageFilters).filter((function(e){return"team"===e.type}))},messageFilters:function(){return Object.values(this.$store.state.messageFilters).filter((function(e){return"folder"===e.type}))},messageTools:function(){return Object.values(this.$store.state.messageTools)}}},H=Y,J=(s("3694"),Object(u["a"])(H,T,K,!1,null,"6fbfd81a",null)),N=J.exports,Q={name:"Messages",components:{TheMessageSidebar:N,TheMessageTabBar:x},computed:{openMessages:function(){var e=this,t=[];return this.$store.state.messageMeta&&(t=Object.values(this.$store.state.messages).filter((function(t){var s=e.$store.state.messageMeta[t[".key"]];return!(!s||!s.isOpen)}))),t}},created:function(){this.$store.dispatch("fetchAllMessageFilters",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllTeams",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllMessageMetaForUser",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllUsers").then((function(e){console.log(e)}))}},G=Q,X=(s("4907"),Object(u["a"])(G,b,y,!1,null,"46849076",null)),Z=X.exports,ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-view-container"},[s("nav",{staticClass:"navbar navbar-expand-md message-bar"},[s("div",{staticClass:"back-button",on:{click:function(t){return e.back()}}},[s("span",{staticClass:"fa fa-arrow-left"})]),s("h1",[e._v(e._s(e.message.subject))]),e._l(e.teamRecipients,(function(e){return s("AppTeam",{key:e[".key"],attrs:{team:e}})})),s("div",{staticClass:"message-actions-container"},[s("ul",{staticClass:"message-actions"},[s("li",[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#"},on:{click:e.doReply}},[s("i",{staticClass:"fa fa-reply"}),e._v(" Reply ")])]),s("li",[s("StatusPopper",{attrs:{status:e.messageStatus},on:{"change-message-status":e.changeMessageStatus}})],1)])])],2),e.assignable?s("div",[e._v(" Assignee "),e.isAssigned?s("span",[s("a",{attrs:{href:"#"}},[s("img",{staticClass:"avatar",attrs:{src:e.assignedUser.avatar}})])]):e.assignable?s("span",[e._m(0)]):e._e()]):e._e(),s("div",{staticClass:"message-view",attrs:{id:"message-view"}},[s("div",{staticClass:"reply-item"},[s("div",{staticClass:"media g-mb-30 media-comment"},[s("img",{staticClass:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",attrs:{src:e.from.avatar,alt:e.initials}}),s("div",{staticClass:"media-body u-shadow-v18 g-bg-secondary g-pa-30"},[s("div",{staticClass:"g-mb-15"},[s("h5",{staticClass:"h5 g-color-gray-dark-v1 mb-0"},[e._v(e._s(e.from.name))]),s("span",{staticClass:"g-color-gray-dark-v4 g-font-size-12"},[s("AppDate",{attrs:{timestamp:e.message.createdAt}})],1)]),s("p",{domProps:{innerHTML:e._s(e.message.body)}}),s("div",{staticClass:"attachments"},e._l(e.attachments,(function(e){return s("AttachmentItem",{key:e[".key"],attrs:{attachment:e}})})),1)])])]),s("ReplyList",{attrs:{message:e.message}}),e.isReplying?s("div",{staticClass:"message-editor"},[s("TextEditor",{on:{updateContent:function(t){e.replyText=t}}}),s("div",{staticClass:"message-editor-actions-container"},[s("ul",{staticClass:"message-editor-actions reply"},[s("li",[s("a",{staticClass:"submit-reply",on:{click:function(t){return e.submitReply()}}},[e._v("Send")])]),s("li",[s("a",{staticClass:"submit-reply",on:{click:function(t){return e.cancelReply()}}},[e._v("Cancel")])])])])],1):s("div",{staticClass:"message-editor"},[s("div",{staticClass:"message-editor-actions-container"},[s("ul",{staticClass:"message-editor-actions"},[s("li",[e.isReplying?e._e():s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#"},on:{click:e.doReply}},[s("i",{staticClass:"fa fa-reply"}),e._v(" Reply ")])])])])])],1)])},te=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#"}},[s("span",{staticClass:"avatar empty"})])}],se=(s("a15b"),s("d81d"),s("b64b"),s("ac1f"),s("466d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{attrs:{title:e._f("humanFriendlyDate")(e.timestamp)}},[e._v(e._s(e._f("humanFriendlyDate")(e.timestamp)))])}),ae=[],ie=s("c1df"),ne=s.n(ie),re={name:"AppDate",props:{timestamp:{required:!0,type:String}},filters:{humanFriendlyDate:function(e){var t="",s=ne()().toISOString(),a=ne()(e).toISOString();return t=ne()(a).isSame(s,"hour")?ne()(a).fromNow():ne()(a).isSame(s,"day")?ne()(a).format("[Today at] h:mmA"):ne()(a).isSame(s,"week")?ne()(a).format("ddd h:mmA"):ne()(a).isSame(s,"month")||ne()(a).isSame(s,"year")?ne()(a).format("MMM D"):ne()(a).format("MMM D, YYYY"),t}}},oe=re,ce=Object(u["a"])(oe,se,ae,!1,null,"fa892780",null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-editor",on:{click:e.editorClicked}},[s("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.commands,a=e.isActive;return[s("div",{staticClass:"text-editor-menu-bar"},[s("ul",{staticClass:"button-bar"},[s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.bold}},[s("i",{staticClass:"fa fa-bold"})])]),s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.italic}},[s("i",{staticClass:"fa fa-italic"})])]),s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.underline}},[s("i",{staticClass:"fa fa-underline"})])])])])]}}])}),s("div",{ref:"editor",staticClass:"text-editor-textarea"},[s("editor-content",{attrs:{editor:e.editor}})],1)],1)},me=[],de=s("cd42"),fe=s("f23d"),pe={name:"TextEditor",components:{EditorContent:de["b"],EditorMenuBar:de["c"]},methods:{editorClicked:function(){this.editor.focus()}},data:function(){var e=this;return{editor:new de["a"]({content:"",autoFocus:!0,extensions:[new fe["a"],new fe["b"],new fe["c"]]}).on("update",(function(t){var s=t.getHTML,a=s();e.$emit("updateContent",a)}))}},beforeDestroy:function(){this.editor.destroy()}},he=pe,ge=(s("4b0f"),Object(u["a"])(he,ue,me,!1,null,"e45e5008",null)),ve=ge.exports,be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"team badge"},[e._v("#"+e._s(e.team.name))])},ye=[],je={name:"AppTeam",props:{team:{required:!0,type:Object}}},ke=je,Ce=(s("9fd2"),Object(u["a"])(ke,be,ye,!1,null,"7c81b827",null)),_e=Ce.exports,Ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-list"},e._l(e.replies,(function(e){return s("ReplyListItem",{key:e[".key"],attrs:{reply:e}})})),1)},Me=[],we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-item"},[s("div",{staticClass:"media g-mb-30 media-comment"},[s("img",{staticClass:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",attrs:{src:e.from.avatar,alt:e.from.name}}),s("div",{staticClass:"media-body u-shadow-v18 g-bg-secondary g-pa-30"},[s("div",{staticClass:"g-mb-15"},[s("h5",{staticClass:"h5 g-color-gray-dark-v1 mb-0"},[e._v(e._s(e.from.name))]),s("span",{staticClass:"g-color-gray-dark-v4 g-font-size-12"},[s("AppDate",{attrs:{timestamp:e.reply.createdAt}})],1)]),s("p",[e._v(e._s(e.reply.body))])])])])},Oe=[],Ae={name:"ReplyListItem",components:{AppDate:le},props:{reply:{required:!0,type:Object}},computed:{from:function(){return this.$store.state.users[this.reply.userId]}}},Fe=Ae,Se=(s("58c9"),Object(u["a"])(Fe,we,Oe,!1,null,"26a537d2",null)),xe=Se.exports,Te={name:"ReplyList",components:{ReplyListItem:xe},props:{message:{required:!0,type:Object}},computed:{replies:function(){var e=this;return this.message.replies?Object.keys(this.message.replies).map((function(t){return e.$store.state.replies[t]})):[]}}},Ke=Te,$e=Object(u["a"])(Ke,Ie,Me,!1,null,"35dc4d46",null),Pe=$e.exports,Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"attachment badge",class:[e.attachment.type],on:{click:function(t){return t.stopPropagation(),e.viewAttachment()}}},[s("span",{staticClass:"fa attachment-name",class:e.icon}),e._v(" "),s("span",{staticClass:"attachment-name"},[e._v(e._s(e.attachment.name))])])},De=[],Re={name:"AttachmentItem",props:{attachment:{required:!0,type:Object}},methods:{viewAttachment:function(){"document"===this.attachment.type?this.$router.push({name:"PagePDFVue",params:{attachmentId:this.attachment[".key"]}}):"patient"===this.attachment.type&&this.$store.dispatch("loadPatient",{pid:this.attachment.properties.pid})}},computed:{icon:function(){var e="fa-file";return"document"===this.attachment.type?e="fa-file":"patient"===this.attachment.type&&(e="fa-user"),e}}},Le=Re,ze=(s("c1ad"),Object(u["a"])(Le,Ee,De,!1,null,"dde4427e",null)),qe=ze.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Popper",{ref:"popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"right"}}},[s("div",{staticClass:"popper"},e._l(e.statusOptions,(function(t){return s("StatusPopperItem",{key:t[".key"],attrs:{status:t},on:{"change-status":e.changeStatus}})})),1),e.clickText?s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[e._v(e._s(e.clickText))]):s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"status",class:this.status.iconClass,style:{color:this.status.color}})])])],1)},Ve=[],Be=s("526e"),Ue=s.n(Be),Ye=(s("a101"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"status-item",attrs:{href:"#"},on:{click:function(t){return e.changeStatus()}}},[s("span",{style:{color:e.statusColor}},[s("span",{class:e.statusIconClass}),e._v(" "+e._s(e.statusTitle)+" ")])])}),He=[],Je={name:"StatusPopperItem",props:{status:{required:!0,type:Object}},methods:{changeStatus:function(){this.$emit("change-status",this.status)}},computed:{statusColor:function(){return this.status.color},statusTitle:function(){return this.status.title},statusIconClass:function(){return this.status.iconClass}}},Ne=Je,Qe=Object(u["a"])(Ne,Ye,He,!1,null,"26713fa7",null),Ge=Qe.exports,Xe={name:"StatusPopper",components:{StatusPopperItem:Ge,Popper:Ue.a},props:{status:{required:!1,type:Object},clickText:{required:!1,type:String,default:""}},data:function(){return{currentStatus:"new"}},computed:{statusOptions:function(){return this.$store.state.messageOptions.statusOptions}},methods:{changeStatus:function(e){this.status=e,this.$refs.popper.doClose(),this.$emit("change-message-status",this.status)}}},Ze=Xe,et=(s("2d60"),Object(u["a"])(Ze,We,Ve,!1,null,"64aa1bff",null)),tt=et.exports,st={name:"PageViewMessage",components:{StatusPopper:tt,AttachmentItem:qe,ReplyList:Pe,TextEditor:ve,AppDate:le,AppTeam:_e},props:{messageId:{required:!0,type:String}},data:function(){return{isReplying:!1,replyText:""}},computed:{messageStatus:function(){return this.$store.state.messageOptions.statusOptions[this.message.status]},attachments:function(){var e=this;if(this.message.attachments){var t=Object.keys(this.message.attachments),s=t.map((function(t){return e.$store.state.attachments[t]}));return s}return[]},message:function(){return this.$store.state.messages[this.messageId]},from:function(){return this.$store.state.users[this.message.userId]},isAssigned:function(){return null!==this.message.assignedTo},initials:function(){return this.from.name.match(/\b(\w)/g).join("").toUpperCase()},assignedUser:function(){var e=this.$store.state.users[this.message.assignedTo];return e},assignable:function(){return!0===this.message.assignable},meta:function(){return this.$store.state.messageMeta[this.messageId]},recipientsList:function(){var e=this;return Object.keys(this.message.recipients.users).map((function(t){return e.$store.state.users[t].name})).join(", ")},teamRecipients:function(){var e=this;return this.message.recipients.teams?Object.keys(this.message.recipients.teams).map((function(t){return e.$store.state.teams[t]})):[]}},methods:{doReply:function(){this.isReplying=!0;var e=document.getElementById("message-view");e.scrollTop=e.scrollHeight},markAsRead:function(){this.$store.dispatch("setMessageAsRead",{message:this.message,userId:this.$store.state.authId})},back:function(){this.$router.back()},changeMessageStatus:function(e){this.$store.dispatch("setMessageStatus",{message:this.message,status:e})},submitReply:function(){this.$store.dispatch("addReply",{message:this.message,text:this.replyText,userId:this.$store.state.authId}),this.isReplying=!1},cancelReply:function(){this.isReplying=!1}},mounted:function(){this.markAsRead()},created:function(){}},at=st,it=(s("0944"),Object(u["a"])(at,ee,te,!1,null,"4778b1cd",null)),nt=it.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MessageList",{attrs:{listId:e.listId,messages:e.messages}})},ot=[],ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-list"},[s("div",{staticClass:"message-filters"},[s("div",[s("Popper",{ref:"select-all-options-popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"bottom"}}},[s("div",{staticClass:"popper"},[s("a",{staticClass:"select-all-options-item",attrs:{href:"#"}},[s("StatusPopper",{attrs:{clickText:e.bulkStatusText},on:{"change-message-status":e.changeStatusOfSelected}})],1),s("a",{staticClass:"select-all-options-item",attrs:{href:"#"},on:{click:e.archiveSelected}},[s("span",{staticClass:"fa fa-archive"}),e._v(" Archive ")])]),s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"btn select-all-options fa fa-caret-down"})])])],1),s("div",[s("a",{staticClass:"right",attrs:{href:"#"},on:{click:function(t){return e.onRefresh()}}},[s("span",{staticClass:"btn fa fa-sync"})])]),s("div",{staticClass:"search-container"},[s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"Search...",name:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),s("i",{staticClass:"fa fa-search search-span"})])])]),s("div",{staticClass:"tableFixHead"},[s("table",{staticClass:"table message-list-table"},[s("thead",[s("tr",[s("th",{staticClass:"checkbox"},[s("div",{staticClass:"select-all-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{click:e.select,change:function(t){var s=e.selectAll,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);a.checked?r<0&&(e.selectAll=s.concat([n])):r>-1&&(e.selectAll=s.slice(0,r).concat(s.slice(r+1)))}else e.selectAll=i}}})])]),s("th",{staticClass:"status"},[e._v("Status")]),s("th",{staticClass:"message"},[e._v("Message "),s("SortToggle",{attrs:{column:"message",initialSortDir:"none"},on:{"sort-changed":e.onSortChanged}})],1),s("th",{staticClass:"indicators"},[e._v("Indicators")]),s("th",{staticClass:"participants"},[e._v("Participants")]),s("th",{staticClass:"updated-date"},[e._v("Updated Date "),s("SortToggle",{attrs:{column:"updated-date",initialSortDir:"desc"},on:{"sort-changed":e.onSortChanged}})],1),s("th",{staticClass:"actions"})])]),s("tbody",e._l(e.filteredMesssages,(function(t){return s("MessageListItem",{key:t[".key"],attrs:{listId:e.listId,selected:e.selected,message:t},on:{"message-selected":e.onMessageSelected}})})),1)])])])},lt=[],ut=(s("4160"),s("caad"),s("c975"),s("45fc"),s("a434"),s("25f0"),s("2532"),s("841c"),s("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",{staticClass:"message-list-item",class:{assignable:e.assignable,unread:e.unread}},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.iAmSelected,expression:"iAmSelected"}],attrs:{type:"checkbox",id:e.checkboxId},domProps:{value:e.messageId,checked:Array.isArray(e.iAmSelected)?e._i(e.iAmSelected,e.messageId)>-1:e.iAmSelected},on:{change:[function(t){var s=e.iAmSelected,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e.messageId,r=e._i(s,n);a.checked?r<0&&(e.iAmSelected=s.concat([n])):r>-1&&(e.iAmSelected=s.slice(0,r).concat(s.slice(r+1)))}else e.iAmSelected=i},e.onCheck]}})]),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("StatusPopper",{attrs:{status:e.messageStatus},on:{"change-message-status":e.changeMessageStatus}})],1)])]),s("td",{staticClass:"view-details",on:{click:function(t){return e.viewMessage()}}},[s("div",{staticClass:"subject"},[s("span",[e._v(e._s(e.message.subject))]),e._l(e.tags,(function(e){return s("TagItem",{key:e[".key"],attrs:{tag:e}})})),s("small",{staticClass:"text-muted"},[e._v(" (#"+e._s(e.messageId)+")")])],2),s("div",{staticClass:"preview"},[e._v(e._s(e.messagePreview))]),s("div",{staticClass:"attachments"},e._l(e.attachments,(function(e){return s("AttachmentItem",{key:e[".key"],attrs:{attachment:e}})})),1)]),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("span",{staticClass:"far fa-comment-alt"}),e._v(" "+e._s(e.replyCount))]),e.hasViewers?s("li",[s("span",{staticClass:"fa fa-eye",attrs:{title:e.viewersList}})]):s("li",[s("span")])])]),s("td",[s("div",[s("span",[e._v(e._s(e.fromName))])]),s("div",{staticClass:"actors"},[e._l(e.teamRecipients,(function(e){return s("AppTeam",{key:e[".key"],attrs:{team:e}})})),e._v(" "),s("span",{staticClass:"recipient-list"},[e._v(e._s(e.recipientsList))])],2)]),s("td",[s("span",[s("AppDate",{attrs:{timestamp:this.message.updatedAt}})],1)]),s("td",{staticClass:"actions-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("Popper",{ref:"popper",attrs:{trigger:"hover",stopPropagation:!0,options:{placement:"left"}}},[s("div",{staticClass:"popper"},[e._l(e.teamRecipients,(function(t){return s("a",{key:t[".key"],staticClass:"popper-item",attrs:{team:t,data:""},on:{click:function(s){return e.moveToTeam(t[".key"])}}},[s("span",{staticClass:"fa fa-hashtag"}),e._v(" "+e._s(t.name))])})),s("a",{staticClass:"popper-item",on:{click:function(t){return e.moveToArchive()}}},[s("span",{staticClass:"fa fa-archive"}),e._v(" Archive")]),e.unread?s("a",{staticClass:"popper-item",on:{click:function(t){return e.markAsRead()}}},[s("span",{staticClass:"fa fa-envelope-open"}),e._v(" Mark as Read")]):s("a",{staticClass:"popper-item",on:{click:function(t){return e.markAsUnread()}}},[s("span",{staticClass:"fas fa-envelope"}),e._v(" Mark as Unread")])],2),s("a",{attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"message-item-more-actions fa fa-ellipsis-v"})])])],1)])])])}),mt=[],dt=(s("fb6a"),s("5319"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"badge bg-gray"},[e._v(e._s(e.tag.name))])}),ft=[],pt={name:"TagItem",props:{tag:{required:!0,type:Object}}},ht=pt,gt=Object(u["a"])(ht,dt,ft,!1,null,"5652b663",null),vt=gt.exports,bt={name:"MessageListItem",components:{StatusPopper:tt,Popper:Ue.a,AppTeam:_e,AppDate:le,AttachmentItem:qe,TagItem:vt},props:{message:{required:!0,type:Object},selected:{required:!1,type:Array},listId:{required:!0,type:String}},methods:{onCheck:function(){this.$emit("message-selected",this.message[".key"])},viewMessage:function(){this.$router.push({name:"PageMessageView",params:{messageId:this.message[".key"]}}),this.$store.dispatch("openMessage",this.message)},moveToTeam:function(e){var t=this.$store.state.teams[e].filterId;this.$store.dispatch("moveToList",{message:this.message,fromListId:this.listId,toListId:t,userId:this.$store.state.authId})},moveToArchive:function(){this.$store.dispatch("moveToList",{message:this.message,fromListId:this.listId,toListId:3,userId:this.$store.state.authId})},moveToInbox:function(){this.$store.dispatch("moveToList",{message:this.message,fromListId:this.listId,toListId:1,userId:this.$store.state.authId})},markAsRead:function(){this.$store.dispatch("setMessageAsRead",{message:this.message,userId:this.$store.state.authId})},markAsUnread:function(){this.$store.dispatch("setMessageAsUnread",{message:this.message,userId:this.$store.state.authId})},takeOwnership:function(){this.$store.dispatch("takeOwnership",{message:this.message,userId:this.$store.state.authId})},changeMessageStatus:function(e){this.$store.dispatch("setMessageStatus",{message:this.message,status:e})}},computed:{iAmSelected:{get:function(){return!(!this.selected||!this.selected.includes(this.messageId))},set:function(e){console.log(this.message[".key"]+": "+e)}},checkboxId:function(){return"checkbox-"+this.message[".key"]},meta:function(){return this.$store.state.messageMeta[this.messageId]},unread:function(){return!this.meta||!this.meta.isRead},messageId:function(){return this.message[".key"]},messageStatus:function(){return this.$store.state.messageOptions.statusOptions[this.message.status]},messagePreview:function(){var e=this.message.body.replace(/(<([^>]+)>)/gi," ");return e.length>80?e.slice(0,80)+"...":e},replyCount:function(){var e=0;return this.message.replies&&(e=Object.keys(this.message.replies).length),e},isAssigned:function(){return null!==this.message.assignedTo},assignedUser:function(){var e=this.$store.state.users[this.message.assignedTo];return e},assignable:function(){return!0===this.message.assignable},attachments:function(){var e=this;if(this.message.attachments){var t=Object.keys(this.message.attachments),s=t.map((function(t){return e.$store.state.attachments[t]}));return s}return[]},tags:function(){var e=this;if(this.message.tags){var t=Object.keys(this.message.tags).map((function(t){return e.$store.state.tags[t]}));return t}return[]},fromName:function(){return this.$store.state.users[this.message.userId].name},viewersList:function(){var e=this,t=[];this.message.viewers&&(t=Object.keys(this.message.viewers));var s="";s=t.length>1?" are viewing":" is viewing";var a=t.map((function(t){return e.$store.state.users[t].name})).join(", ");return a+s},hasViewers:function(){var e=[];return this.message.viewers&&(e=Object.keys(this.message.viewers)),e.length>0},recipientsList:function(){var e=this;return Object.keys(this.message.recipients).map((function(t){return e.$store.state.users[t].name})).join(", ")},teamRecipients:function(){var e=this;return this.message.teams?Object.keys(this.message.teams).map((function(t){return e.$store.state.teams[t]})):[]}}},yt=bt,jt=(s("cc02"),Object(u["a"])(yt,ut,mt,!1,null,"0d76cc2a",null)),kt=jt.exports,Ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"message-list-sort-toggle",attrs:{title:e.title,href:"#"},on:{click:function(t){return t.preventDefault(),e.toggle(t)}}},[s("span",{class:this.statusClass})])},_t=[],It={name:"SortToggle",props:{title:{required:!1,type:String},column:{required:!0,type:String},initialSortDir:{required:!0,type:String}},data:function(){return{sortDir:"none",sortOptions:["asc","desc","none"]}},methods:{toggle:function(){var e=this.sortOptions.indexOf(this.sortDir)+1,t=this.sortOptions[e%this.sortOptions.length];this.sortDir=t,this.$emit("sort-changed",{sortDir:this.sortDir,column:this.column})}},computed:{statusClass:function(){var e="";return e="asc"===this.sortDir?"fas fa-fw fa-angle-up":"desc"===this.sortDir?"fas fa-fw fa-angle-down":"fas fa-fw fa-minus",e}},mounted:function(){this.sortDir=this.initialSortDir,this.$emit("sort-changed",{sortDir:this.sortDir,column:this.column})}},Mt=It,wt=(s("494d"),Object(u["a"])(Mt,Ct,_t,!1,null,"2ad490ac",null)),Ot=wt.exports,At={name:"MessageList",components:{SortToggle:Ot,StatusPopper:tt,MessageListItem:kt,Popper:Ue.a},data:function(){return{page:1,search:"",selected:[],selectAll:!1,sortFunctions:{message:this.compareSubjects,"updated-date":this.compareDates},activeSorts:[]}},props:{messages:{required:!0,type:Array},listId:{required:!0,type:String}},watch:{listId:function(e,t){this.selectAll=!1,this.selected=[]}},computed:{filteredMesssages:function(){var e=this,t=this.messages;if(this.search){var s=this.messages.filter((function(t){var s=Object.values(t);return s.some((function(t){var s=!1;if(t)if("string"===typeof t){var a=t.toLowerCase();a.includes(e.search.toLowerCase())&&(s=!0)}else t.toString(10).includes(e.search)&&(s=!0);return s}))}));t=s}var a=this;return t.sort((function(e,t){var s=0;return a.activeSorts.forEach((function(i){if("none"!==i.sortDir){var n="desc"===i.sortDir?1:-1,r=a.sortFunctions[i.column];1===r(e,t)?s=1*n:-1===r(e,t)&&(s=-1*n)}})),s})),t},bulkStatusText:function(){return"Change Status ["+this.selected.length+" messages]"}},methods:{compareDates:function(e,t){var s=ne()(e.updatedAt),a=ne()(t.updatedAt);return s.isBefore(a)?1:a.isBefore(s)?-1:0},compareSubjects:function(e,t){return e.subject<t.subject?1:t.subject<e.subject?-1:0},onRefresh:function(){this.$store.dispatch("fetchAllMessageFilters",{userId:this.$store.state.authId}).then((function(e){console.log(e)}))},archiveSelected:function(){var e=this;this.selected.forEach((function(t){var s=e.$store.state.messages[t];e.$store.dispatch("moveToList",{message:s,fromListId:e.listId,toListId:3,userId:e.$store.state.authId})}))},changeStatusOfSelected:function(e){var t=this;this.selected.forEach((function(s){var a=t.$store.state.messages[s];t.$store.dispatch("setMessageStatus",{message:a,status:e})}))},onSortChanged:function(e){console.log(e);var t=this.activeSorts.indexOf(e.column);t>-1&&this.activeSorts.splice(t,1),"none"!==e.sortDir&&this.activeSorts.push(e)},onMessageSelected:function(e){Object.values(this.messages).forEach((function(t){t[".key"]===e&&console.log("id: "+e+' "'+t.subject+'"')}));var t=this.selected.indexOf(e);t>-1?this.selected.splice(t,1):this.selected.push(e)},select:function(){var e=this;console.log("select all"),this.selected=[],this.selectAll||Object.values(this.filteredMesssages).forEach((function(t){console.log("id: "+t[".key"]+' "'+t.subject+'"'),e.selected.push(t[".key"])}))}}},Ft=At,St=(s("e47e"),Object(u["a"])(Ft,ct,lt,!1,null,"10fdc823",null)),xt=St.exports,Tt={name:"PageViewMessageList",components:{MessageList:xt},props:{listId:{required:!0,type:String}},computed:{messages:function(){var e=this;return this.$store.state.messageFilters[this.listId]?Object.keys(this.$store.state.messageFilters[this.listId].messages).map((function(t){return e.$store.state.messages[t]})):[]}}},Kt=Tt,$t=Object(u["a"])(Kt,rt,ot,!1,null,"627cd5b3",null),Pt=$t.exports,Et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-view-container"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],staticClass:"form-input",attrs:{placeholder:"Subject...",type:"text",id:"message-subject",name:"subject"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("FieldUserSelect",{on:{updateRecipients:function(t){e.recipients=t}}})],1),s("div",{staticClass:"form-group"},[s("TextEditor",{on:{updateContent:function(t){e.body=t}}})],1),e._m(0)])])},Dt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-ghost"},[e._v("Cancel")]),s("button",{staticClass:"btn btn-blue",attrs:{type:"submit",name:"Publish"}},[e._v("Publish ")])])}],Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-select"},[s("vue-tags-input",{staticClass:"tags-input",attrs:{placeholder:"Select users or teams",tags:e.tags,"allow-edit-tags":!1,"autocomplete-items":e.filteredUsers},on:{"tags-changed":e.updateRecipients},scopedSlots:e._u([{key:"autocomplete-item",fn:function(t){return s("div",{staticClass:"my-item",on:{click:function(e){return t.performAdd(t.item)}}},[s("img",{staticClass:"avatar",attrs:{src:t.item.avatar}}),e._v(" "+e._s(t.item.text)+" ")])}},{key:"tag-left",fn:function(e){return s("div",{staticClass:"my-tag-left",on:{click:function(t){return e.performOpenEdit(e.index)}}},[s("img",{staticClass:"tag avatar",attrs:{src:e.tag.avatar}})])}}]),model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1)},Lt=[],zt=s("c7a0"),qt=s.n(zt),Wt={name:"FieldUserSelect",components:{VueTagsInput:qt.a},props:{users:{required:!1,type:Array}},data:function(){return{tag:"",separators:[";",","],tags:[]}},methods:{updateRecipients:function(e){this.tags=e,this.$emit("updateRecipients",this.tags)}},computed:{filteredUsers:function(){return Object.values(this.$store.state.users).map((function(e){return{text:e.username,avatar:e.avatar,id:e[".key"]}}))}}},Vt=Wt,Bt=(s("57d5"),Object(u["a"])(Vt,Rt,Lt,!1,null,"ff9b0bf2",null)),Ut=Bt.exports,Yt={name:"PageMessageCreate",components:{FieldUserSelect:Ut,TextEditor:ve},data:function(){return{subject:"",body:"",recipients:[],attachments:[]}},methods:{save:function(){var e=this,t={subject:this.subject,body:this.body,recipients:this.recipients};this.$emit("save",{message:t}),this.$store.dispatch("createMessage",t).then((function(t){e.$router.push({name:"PageMessageView",params:{messageId:t[".key"]}}),e.$store.dispatch("openMessage",t)}))}}},Ht=Yt,Jt=(s("7ba5"),Object(u["a"])(Ht,Et,Dt,!1,null,"89d81966",null)),Nt=Jt.exports,Qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fullscreen"},[s("nav",{staticClass:"navbar navbar-dark sticky-top"},[s("h1",{staticClass:"navbar-brand"},[e._v(e._s(e.filename))]),s("ul",{staticClass:"nav navbar-nav ml-auto"},[e.isEditMode?s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doView()}}},[s("span",{staticClass:"fas fa-eye"})])]):s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doEdit()}}},[s("span",{staticClass:"fas fa-edit"})])]),s("li",[s("Popper",{ref:"download-popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"bottom"}}},[s("div",{staticClass:"popper"},[s("a",{staticClass:"popper-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadPdfWithAxios()}}},[e._v("PDF")]),s("a",{staticClass:"popper-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadDocWithAxios()}}},[e._v("MS Word")])]),s("a",{attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"fas fa-download"})])])],1),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$refs.pdf[0].print()}}},[s("span",{staticClass:"fas fa-print"})])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.closeFile()}}},[s("span",{staticClass:"fas fa-times"})])])])]),s("div",{staticClass:"canvas-container"},[e.isEditMode?s("div",[s("tinymce",{ref:"tinymce",attrs:{id:"tinymce-editor",value:e.editorContent,plugins:e.plugins,toolbar1:e.toolbar1,toolbar2:e.toolbar2,other_options:e.tinyOptions},on:{"on-save":e.save}})],1):s("div",e._l(e.numPages,(function(t){return s("pdf",{key:t,ref:"pdf",refInFor:!0,staticClass:"canvas",attrs:{src:e.pdfFile.properties.url,page:t}})})),1)])])},Gt=[],Xt=(s("3ca3"),s("ddb0"),s("2b3d"),s("858e")),Zt=s("bc3a"),es=s.n(Zt),ts=s("2cbf"),ss="",as={components:{tinymce:ts["a"],pdf:Xt["a"],Popper:Ue.a},props:{attachmentId:{required:!0,type:String},edit:{type:Boolean,default:!1}},data:function(){return{isEditMode:!1,numPages:void 0,editorContent:"",tinyOptions:{height:"600px",width:"100%",menubar:!1},plugins:["save advlist autolink lists image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar1:"save | undo redo | formatselect | bold italic backcolor forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",toolbar2:""}},computed:{attachment:function(){return this.$store.state.attachments[this.attachmentId]},pdfFile:function(){return this.getFileOfType("pdf")},htmlFile:function(){return this.getFileOfType("html")},docFile:function(){var e=this.getFileOfType("doc");return e||(e=this.getFileOfType("docx")),e},htmlValue:function(){return""},filename:function(){return this.attachment.name}},watch:{isEditMode:function(e){var t=this;!1===e&&this.pdfFile.properties.url?(ss=Xt["a"].createLoadingTask(this.pdfFile.properties.url),ss.promise.then((function(e){t.numPages=e.numPages}))):!0===e&&this.htmlFile.properties.url&&es.a.get(this.htmlFile.properties.url).then((function(e){t.editorContent=e.data}))}},methods:{getFileOfType:function(e){var t=this,s=null;return Object.values(this.attachment.files).forEach((function(a){var i=t.$store.state.files[a];(i.type===e&&i.revision===t.attachment.revision||i.type===e&&i.revision===t.attachment.revision)&&(s=i)})),s},closeFile:function(){this.$router.back()},doEdit:function(){this.isEditMode=!0},doView:function(){this.isEditMode=!1},save:function(e){this.editorContent=e,this.$store.dispatch("pushHtml",{file:this.htmlFile,content:e}).then((function(e){console.log("revision is now at:"+e.revision)}))},forceFileDownload:function(e,t){var s=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=s,a.setAttribute("download",this.filename+"."+t),document.body.appendChild(a),a.click()},downloadPdfWithAxios:function(){var e=this;es()({method:"get",url:this.pdfFile.properties.url,responseType:"arraybuffer"}).then((function(t){e.forceFileDownload(t,e.pdfFile.type)})).catch((function(e){console.log(e)}))},downloadDocWithAxios:function(){var e=this;es()({method:"get",url:this.docFile.properties.url,responseType:"arraybuffer"}).then((function(t){e.forceFileDownload(t,e.docFile.type)})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;this.isEditMode=this.edit,!1===this.isEditMode&&this.pdfFile.properties.url?(ss=Xt["a"].createLoadingTask(this.pdfFile.properties.url),ss.promise.then((function(t){e.numPages=t.numPages}))):!0===this.isEditMode&&this.htmlFile.properties.url&&es.a.get(this.htmlFile.properties.url).then((function(t){e.editorContent=t.data}))}},is=as,ns=(s("3bc2"),Object(u["a"])(is,Qt,Gt,!1,null,"4f951874",null)),rs=ns.exports;a["a"].use(v["a"]);var os=[{path:"/",redirect:"/messages/list/1"},{path:"/about",name:"About",component:function(){return s.e("about").then(s.bind(null,"f820"))}},{path:"/attachment/edit/:attachmentId",name:"PagePDFEdit",component:rs,props:!0},{path:"/attachment/:attachmentId",name:"PagePDFVue",component:rs,props:!0},{path:"/messages",name:"PageMessages",component:Z,children:[{path:"message/:messageId",name:"PageMessageView",component:nt,props:!0},{path:"message/create",name:"PageMessageCreate",component:Nt},{path:"list/:listId",name:"PageMessageListView",component:Pt,props:!0}]}],cs=new v["a"]({mode:"history",base:"/openemr/interface/modules/custom_modules/oe-mi-messages/client/dist/",routes:os}),ls=cs,us=s("5530"),ms=s("2f62"),ds=s("5033");a["a"].use(ms["a"]);var fs="/openemr",ps=new ms["a"].Store({state:Object(us["a"])({},ds,{userState:{openTabs:{},activeFilter:"1"},messageOptions:{statusOptions:{new:{".key":"new",color:"#3e5e8e",iconClass:"far fa-check-circle",title:"New"},"in-progress":{".key":"in-progress",color:"#c8bc4d",iconClass:"fas fa-check-circle",title:"In-Progress"},complete:{".key":"complete",color:"#17d923",iconClass:"fas fa-check-circle",title:"Complete"}}},messageMeta:{},jobs:{},attachments:{},files:{},messageFilters:{},messageTools:{},messages:{},replies:{},authId:"4"}),actions:{loadPatient:function(e,t){e.commit,e.state;var s=t.pid;top.restoreSession(),top.RTop.location=fs+"/interface/patient_file/summary/demographics.php?set_pid="+encodeURIComponent(s)},openMessage:function(e,t){var s=e.commit,a=e.state,i=t[".key"];return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!open_message",{params:{userId:a.authId,messageId:i}}).then((function(e){var t=e.data;s("setMessageMeta",{messageMeta:t,messageId:i})}))},closeMessage:function(e,t){var s=e.commit,a=e.state,i=t[".key"];return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!close_message",{params:{userId:a.authId,messageId:i}}).then((function(e){var t=e.data;s("setMessageMeta",{messageMeta:t,messageId:i})}))},takeOwnership:function(e,t){e.commit,t.message,t.userId},moveToList:function(e,t){var s=e.commit,a=t.message,i=t.fromListId,n=t.toListId,r=t.userId;return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!move_message",{params:{fromFilterId:i,toFilterId:n,userId:r,messageId:a[".key"]}}).then((function(e){return s("removeMessageFromFilter",{messageId:a[".key"],filterId:i}),s("appendMessageToFilter",{messageId:a[".key"],filterId:n}),e.data}))},setMessageAsRead:function(e,t){e.commit;var s=e.dispatch,a=t.message,i=t.userId,n={};this.state.messageMeta[a[".key"]]&&(n=this.state.messageMeta[a[".key"]]),n.isRead=1,s("setMessageMeta",{message:a,userId:i,meta:n})},setMessageAsUnread:function(e,t){e.commit;var s=e.dispatch,a=t.message,i=t.userId,n={};this.state.messageMeta[a[".key"]]&&(n=this.state.messageMeta[a[".key"]]),n.isRead=0,s("setMessageMeta",{message:a,userId:i,meta:n})},setMessageMeta:function(e,t){var s=e.commit,a=t.message,i=t.userId,n=t.meta;return es.a.post(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php",{action:"message!set_message_meta",meta:n,userId:i,messageId:a[".key"]}).then((function(e){var t=e.data;return s("setMessageMeta",{messageMeta:Object(us["a"])({},t,{".key":t.messageId}),messageId:t.messageId}),e.data}))},setMessageStatus:function(e,t){var s=e.commit,a=(e.state,t.message),i=t.status;return a.status=i[".key"],es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!set_message_status",{params:{status:a.status,messageId:a[".key"]}}).then((function(e){return s("setMessage",{message:a,messageId:a[".key"]}),e.data}))},addReply:function(e,t){var s=e.commit,a=(e.state,t.message),i=t.text,n=t.userId;return es()({url:fs+"/interface/modules/custom_modules/oe-mi-messages/index.php",method:"post",data:{action:"message!add_reply_to_message",body:i,messageId:a[".key"],userId:n}}).then((function(e){var t=Object(us["a"])({},e.data,{".key":e.data.id});return s("setReply",{reply:t,replyId:t[".key"]}),s("appendReplyToMessage",{messageId:a[".key"],replyId:t[".key"]}),t}))},createMessage:function(e,t){var s=e.commit,a=e.state,i="greatMessage"+Math.random();return t[".key"]=i,t.userId=a.authId,t.createdAt=Math.floor(Date.now()/1e3),s("setMessage",{message:t,messageId:i}),s("appendMessageToUserSent",{userId:t.userId,messageId:i}),Promise.resolve(a.messages[i])},fetchPreview:function(e,t){var s=e.state,a=e.commit,i=t.attachment;return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!fetch_pdf",{params:{attachmentId:i[".key"]}}).then((function(e){var t=e.data;return a("setFile",{file:Object(us["a"])({},t,{".key":t.id}),fileId:t.id}),s.files[t.id]}))},fetchHtml:function(e,t){var s=e.state,a=e.commit,i=t.attachment;return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!fetch_html",{params:{attachmentId:i[".key"]}}).then((function(e){var t=e.data;return a("setFile",{file:Object(us["a"])({},t,{".key":t.id}),fileId:t.id}),s.files[t.id]}))},pushHtml:function(e,t){e.state;var s=e.commit,a=t.file,i=t.content;return es()({url:fs+"/interface/modules/custom_modules/oe-mi-messages/index.php",method:"post",data:{action:"file!push_html",fileId:a[".key"],content:i}}).then((function(e){var t=e.data,a={};t.files.forEach((function(e){e.revision===t.revision&&(a[e.id]=e.id,s("setFile",{file:Object(us["a"])({},e,{".key":e.id}),fileId:e.id}))}));var i=Object(us["a"])({},t,{".key":t.id,files:a});return s("setAttachment",{attachment:i,attachmentId:t.id}),i}))},fetchMessage:function(e,t){var s=e.state,a=e.commit,i=t.messageId;return new Promise((function(e,t){es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_message",{params:{id:i}}).then((function(t){var i=t.data,n={};i.attachments.forEach((function(e){n[e.id]=e.id}));var r={},o=null;a("setMessage",{message:Object(us["a"])({},i,{".key":i.id,attachments:n,recipients:r,assignedTo:o}),messageId:i.id}),e(s.messages[i.id])}))}))},fetchAllTeams:function(e,t){e.state;var s=e.commit,a=t.userId;return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_teams",{params:{userId:a}}).then((function(e){var t=Object.values(e.data);return t.forEach((function(e){s("setTeam",{team:Object(us["a"])({},e,{".key":e.id}),teamId:e.id})})),t}))},fetchAllMessageMetaForUser:function(e,t){var s=e.state,a=e.commit,i=t.userId;return new Promise((function(e,t){es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_message_meta_for_user",{params:{userId:i}}).then((function(t){var i=t.data;Object.values(i).forEach((function(e){a("setMessageMeta",{messageMeta:Object(us["a"])({},e,{".key":e.messageId}),messageId:e.messageId})})),e(s.messageMeta)}))}))},fetchAllMessageFilters:function(e,t){var s=e.state,a=e.commit,i=t.userId;return window.addEventListener("unhandledrejection",(function(e){console.log(e)})),es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_message_filters",{params:{userId:i}}).then((function(e){var t=Object.values(e.data);return t.forEach((function(e){var t={};e.messages.forEach((function(e){t[e.id]=e.id})),a("setMessageFilter",{messageFilter:Object(us["a"])({},e,{".key":e.id,messages:t}),messageFilterId:e.id}),e.messages.forEach((function(e){var t={};e.teams.forEach((function(e){t[e.id]=e.id}));var s=e.recipients;e.recipients.forEach((function(e){s[e.id]=e.id}));var i=null,n={};e.attachments.forEach((function(e){var t={};e.files.forEach((function(e){t[e.id]=e.id,a("setFile",{file:Object(us["a"])({},e,{".key":e.id}),fileId:e.id})})),n[e.id]=e.id,a("setAttachment",{attachment:Object(us["a"])({},e,{".key":e.id,files:t}),attachmentId:e.id})}));var r={};e.replies.forEach((function(e){r[e.id]=e.id,a("setReply",{reply:Object(us["a"])({},e,{".key":e.id}),replyId:e.id})})),a("setMessage",{message:Object(us["a"])({},e,{".key":e.id,teams:t,recipients:s,attachments:n,replies:r,assignedTo:i}),messageId:e.id})}))})),s.messageFilters})).catch((function(e){console.error(e)}))},fetchMessagesForFilter:function(e,t){e.state;var s=e.commit,a=t.filterId,i=t.userId;return es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_messages",{params:{userId:i,filterId:a}}).then((function(e){var t=Object.values(e.data);t.forEach((function(e){var t={users:{2:"2",3:"3"},teams:{}},a=null,i={};e.attachments.forEach((function(e){i[e.id]=e.id})),s("setMessage",{message:Object(us["a"])({},e,{".key":e.id,recipients:t,attachments:i,assignedTo:a}),messageId:e.id}),e.attachments.forEach((function(e){s("setAttachment",{attachment:Object(us["a"])({},e,{".key":e.id}),attachmentId:e.id})}))}))}))},fetchAllUsers:function(e){var t=e.state,s=e.commit;return new Promise((function(e,a){es.a.get(fs+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_users").then((function(a){var i=Object.values(a.data);i.forEach((function(e){s("setUser",{user:Object(us["a"])({},e,{".key":e.id}),userId:e.id})})),e(t.users)}))}))}},mutations:{setJob:function(e,t){var s=t.job,i=t.jobId;a["a"].set(e.jobs,i,s)},setFile:function(e,t){var s=t.file,i=t.fileId;a["a"].set(e.files,i,s)},setMessage:function(e,t){var s=t.message,i=t.messageId;a["a"].set(e.messages,i,s)},setMessageMeta:function(e,t){var s=t.messageMeta,i=t.messageId;a["a"].set(e.messageMeta,i,s)},setReply:function(e,t){var s=t.reply,i=t.replyId;a["a"].set(e.replies,i,s)},setTeam:function(e,t){var s=t.team,i=t.teamId;a["a"].set(e.teams,i,s)},appendReplyToMessage:function(e,t){var s=t.messageId,i=t.replyId,n=e.messages[s];n.replies||a["a"].set(n,"replies",{}),a["a"].set(n.replies,i,i)},setUser:function(e,t){var s=t.user,i=t.userId;a["a"].set(e.users,i,s)},setAttachment:function(e,t){var s=t.attachment,i=t.attachmentId;a["a"].set(e.attachments,i,s)},setMessageFilter:function(e,t){var s=t.messageFilter,i=t.messageFilterId;a["a"].set(e.messageFilters,i,s)},appendMessageToUserSent:function(e,t){var s=t.messageId,i=t.userId,n=e.users[i];n.sent||a["a"].set(n,"sent",{}),a["a"].set(n.sent,s,s)},appendMessageToFilter:function(e,t){var s=t.messageId,i=t.filterId;a["a"].set(e.messageFilters[i].messages,s,s)},removeMessageFromFilter:function(e,t){var s=t.messageId,i=t.filterId;a["a"].delete(e.messageFilters[i].messages,s)},appendMessageToOpenMessages:function(e,t){t.message;var s=t.messageId;a["a"].set(e.messageMeta[s],s,s)},removeMessageFromOpenMessages:function(e,t){t.message;var s=t.messageId;a["a"].delete(e.userState.openTabs,s,s)}},modules:{}});a["a"].config.productionTip=!1,new a["a"]({router:ls,store:ps,render:function(e){return e(g)}}).$mount("#app")},"57d5":function(e,t,s){"use strict";var a=s("ad29"),i=s.n(a);i.a},"58c9":function(e,t,s){"use strict";var a=s("3b82"),i=s.n(a);i.a},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),i=s.n(a);i.a},6496:function(e,t,s){},"7ba5":function(e,t,s){"use strict";var a=s("55aa"),i=s.n(a);i.a},"8abc":function(e,t,s){},"9c0c":function(e,t,s){},"9fd2":function(e,t,s){"use strict";var a=s("e2a1"),i=s.n(a);i.a},a055:function(e,t,s){},a913:function(e,t,s){},ad29:function(e,t,s){},c1ad:function(e,t,s){"use strict";var a=s("6496"),i=s.n(a);i.a},c268:function(e,t,s){"use strict";var a=s("8abc"),i=s.n(a);i.a},ca48:function(e,t,s){},cc02:function(e,t,s){"use strict";var a=s("a055"),i=s.n(a);i.a},d5ef:function(e,t,s){},d828:function(e,t,s){},e2a1:function(e,t,s){},e47e:function(e,t,s){"use strict";var a=s("ca48"),i=s.n(a);i.a}});
//# sourceMappingURL=app.dab3b497.js.map