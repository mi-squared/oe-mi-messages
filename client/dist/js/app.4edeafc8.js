(function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,i=1;i<s.length;i++){var c=s[i];0!==n[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={app:0},r=[];function i(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"1a6ac6f1"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=n[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=i(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(u);var s=n[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,s[1](l)}n[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/interface/modules/custom_modules/oe-mi-messages/client/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},1:function(e,t){},"123d":function(e,t,s){},2:function(e,t){},2412:function(e,t,s){"use strict";var a=s("379d"),n=s.n(a);n.a},"2a0f":function(e,t,s){},3:function(e,t){},"379d":function(e,t,s){},"3ac4":function(e,t,s){"use strict";var a=s("acb1"),n=s.n(a);n.a},4:function(e,t){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="4678"},4780:function(e,t,s){"use strict";var a=s("a565"),n=s.n(a);n.a},"4b0f":function(e,t,s){"use strict";var a=s("123d"),n=s.n(a);n.a},5:function(e,t){},5033:function(e){e.exports=JSON.parse('{"userState":{"openTabs":{},"activeFilter":"1"},"teams":{"1":{"name":"intern-group","messages":{"102":"102"},"users":{"1":"1","2":"2"},".key":"1"}},"messageFilters":{"1":{"messages":{"100":"100","101":"101","102":"102"},"name":"Inbox","type":"filter","faIcon":"fa-inbox",".key":"1"},"2":{"messages":{"101":"101"},"name":"Sent","type":"filter","faIcon":"fa-paper-plane",".key":"2"},"3":{"messages":{},"name":"Upcoming","type":"filter","faIcon":"fa-clock",".key":"3"},"4":{"messages":{},"name":"Archive","type":"filter","faIcon":"fa-archive",".key":"4"},"5":{"messages":{},"name":"Files","type":"filter","faIcon":"fa-file",".key":"5"}},"messageTools":{"1":{"name":"Configure","faIcon":"fa-cog",".key":"1"}},"tags":{"balloons":{"name":"balloons",".key":"balloons"},"games":{"name":"games",".key":"games"}},"files":{"2000":{"name":"Patient_3000.pdf","type":"pdf","url":"http://Patient_3000.pdf",".key":"2000"}},"messages":{"100":{"subject":"Announcements","body":"Important announcements about the forum.","type":"message","isRead":false,"status":"new","assignable":false,"assignedTo":null,"replies":{"150":"150","151":"151"},"forwards":{},"viewers":{},"recipients":{"users":{"2":"2","3":"3"},"teams":{}},"tags":{"balloons":"baloons","games":"games"},"attachments":{},"userId":"1","createdAt":1589811377,".key":"100"},"101":{"subject":"Cats","body":"There is a cat outside.","type":"message","isRead":true,"status":"complete","assignable":true,"assignedTo":null,"replies":{},"forwards":{},"viewers":{"3":"3"},"recipients":{"users":{"3":"3"},"teams":{}},"attachments":{"2000":"2000"},"tags":{},"userId":"1","createdAt":1504040497,".key":"101"},"102":{"subject":"Take out the trash","body":"Will somebody please take out the trash?","type":"message","isRead":true,"status":"new","assignable":true,"assignedTo":"1","viewers":{},"replies":{},"forwards":{},"recipients":{"users":{"1":"1","2":"2","3":"3","4":"4"},"teams":{"1":"1"}},"attachments":{"2000":"2000"},"tags":{},"userId":"1","createdAt":1504040497,".key":"102"}},"replies":{"150":{"body":"Reply to announcements about the forum.","type":"reply","parentId":"100","forwards":{},"attachments":{},"tags":{},"userId":"4","createdAt":1504040497,".key":"150"},"151":{"body":"I can\'t there are cats outside!!!!!","type":"reply","parentId":"100","forwards":{},"attachments":{},"tags":{},"userId":"2","createdAt":1504040497,".key":"151"}},"users":{"1":{"avatar":"https://avatars3.githubusercontent.com/u/2327556?v=4&s=460","email":"chrisvfritz@gmail.com","lastVisitAt":1504772078,"name":"Chris Fritz","registeredAt":1504632260,"username":"chrisvfritz","usernameLower":"chrisvfritz",".key":"1"},"2":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Ftunajoe?alt=media&token=dcc2eb1d-81a5-4e82-8774-bb97be7c3128","bio":"Love to fish. Work to fish","email":"tunajoe@gmail.com","lastVisitAt":1507227517,"name":"Joey Williams","posts":{"-Kvd3TvfJogbWreitADe":"-Kvd3TvfJogbWreitADe","-KvdBp4adHJpppQWc3sJ":"-KvdBp4adHJpppQWc3sJ","-KvdDmJtvxFMHECuKKLX":"-KvdDmJtvxFMHECuKKLX","-KvdFbzM8tu64CKVW60V":"-KvdFbzM8tu64CKVW60V","-KvfyDwSUGBojOO4OKyY":"-KvfyDwSUGBojOO4OKyY","-KvgM0hiRDPqJzuJgnLv":"-KvgM0hiRDPqJzuJgnLv","-KvgOAeYDKON22qBjHWR":"-KvgOAeYDKON22qBjHWR","-KvgWFVq1pX_QbFmlG-5":"-KvgWFVq1pX_QbFmlG-5","-KvgWYb4YkaFCfCzA_Ck":"-KvgWYb4YkaFCfCzA_Ck","-KvgbTO3-L9eOTzrxhs3":"-KvgbTO3-L9eOTzrxhs3","-KvgeSqPO7yMjOPbSYB2":"-KvgeSqPO7yMjOPbSYB2"},"registeredAt":1507148598,"threads":{"-Kvd3TvfJogbWreitADd":"-Kvd3TvfJogbWreitADd","-KvdBp4adHJpppQWc3sI":"-KvdBp4adHJpppQWc3sI","-KvdDmJtvxFMHECuKKLW":"-KvdDmJtvxFMHECuKKLW","-KvfyDwSUGBojOO4OKyX":"-KvfyDwSUGBojOO4OKyX","-KvgOAeYDKON22qBjHWQ":"-KvgOAeYDKON22qBjHWQ","-KvgWYb4YkaFCfCzA_Cj":"-KvgWYb4YkaFCfCzA_Cj","-KvgeSqPO7yMjOPbSYB1":"-KvgeSqPO7yMjOPbSYB1"},"username":"tunajoe","usernameLower":"tunajoe",".key":"2"},"3":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Frah?alt=media&token=7ad21914-a4f4-4ad0-add6-17e6d3ae9679","bio":"Now this is a story all about how my life got flipped-turned upside down and I\'d like to take a minute just sit right there i\'ll tell you how I became the prince of a town called Bel-Air.","email":"rolf@rah.no","lastVisitAt":1509628794,"name":"Rolf","posts":{"-KsjWehQ--apjDBwSBCZ":"-KsjWehQ--apjDBwSBCZ","-KvcmrN1WpXOUp1yWrJd":"-KvcmrN1WpXOUp1yWrJd","-KvdFThKmnsu9kXOlS3N":"-KvdFThKmnsu9kXOlS3N","-KvdFe4GnBBURhuRY5OZ":"-KvdFe4GnBBURhuRY5OZ","-KvgjI6bfbWYlbYV5nds":"-KvgjI6bfbWYlbYV5nds"},"registeredAt":1504025541,"threads":{"-KsjWehQ--apjDBwSBCY":"-KsjWehQ--apjDBwSBCY","-KvcmrN1WpXOUp1yWrJc":"-KvcmrN1WpXOUp1yWrJc","-KvgjI6bfbWYlbYV5ndr":"-KvgjI6bfbWYlbYV5ndr"},"twitter":"rahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaug","username":"rah","usernameLower":"rah","website":"http://rah.no",".key":"3"},"4":{"avatar":"http://i0.kym-cdn.com/photos/images/facebook/000/010/934/46623-batman_pikachu_super.png","bio":"I\'m Batman!","email":"man@batmail.com","lastVisitAt":1509978791,"name":"Bruce Wayne","posts":{"-KsjnAAjzfpznUVh4DSa":"-KsjnAAjzfpznUVh4DSa","-KsjrmB3IBCu-u-09qQb":"-KsjrmB3IBCu-u-09qQb","-KsjtRwwzHCcV55pKaQ-":"-KsjtRwwzHCcV55pKaQ-","-KsjxMazDmuyf0VMVbCG":"-KsjxMazDmuyf0VMVbCG","-Kvcpl2lxtVztykr82Bv":"-Kvcpl2lxtVztykr82Bv","-Kvd-w-TTMc3Wj-U5JFx":"-Kvd-w-TTMc3Wj-U5JFx","-KvgTpPYkAoq8WoSz46g":"-KvgTpPYkAoq8WoSz46g","-Kvhg7cQD_anWm8x-WYT":"-Kvhg7cQD_anWm8x-WYT","-KvhjGrRB9SpbH67jqbq":"-KvhjGrRB9SpbH67jqbq"},"registeredAt":1504038930,"username":"batman","usernameLower":"batman",".key":"4"},"NnooaWj4KHVxbhKwO1pEdfaQDsD2":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Fraynathan?alt=media&token=bd9a0f0e-60f2-4e60-b092-77d1ded50a7e","email":"raynathan@gmail.com","lastVisitAt":1507312801,"name":"Ray-Nathan James","posts":{"-Kvfw0huq0j2O00bOiWd":"-Kvfw0huq0j2O00bOiWd","-KvfyiF5JP_DJ4HwRhRd":"-KvfyiF5JP_DJ4HwRhRd","-Kvfz9EMh1i8uvLRrEGz":"-Kvfz9EMh1i8uvLRrEGz","-KvgMqM-1LXi7MqOHGvv":"-KvgMqM-1LXi7MqOHGvv","-KvggPpwnevwqHunhXy9":"-KvggPpwnevwqHunhXy9","-KvggXxCEyQQlq6Z3gn0":"-KvggXxCEyQQlq6Z3gn0","-KvggzbFFFwafR2UV2PP":"-KvggzbFFFwafR2UV2PP","-Kvgi7kwtMGggjy3hRPO":"-Kvgi7kwtMGggjy3hRPO","-Kvhfofql-5yAv3TxH2M":"-Kvhfofql-5yAv3TxH2M","-KvhhwVAy5847Uvyw6rT":"-KvhhwVAy5847Uvyw6rT"},"registeredAt":1507196808,"threads":{"-Kvfz9ELFDiz_50c1axQ":"-Kvfz9ELFDiz_50c1axQ","-KvggPpwnevwqHunhXy8":"-KvggPpwnevwqHunhXy8","-KvggzbFFFwafR2UV2PO":"-KvggzbFFFwafR2UV2PO","-Kvgi7kwtMGggjy3hRPN":"-Kvgi7kwtMGggjy3hRPN","-KvhfofpGQZDLljV52k4":"-KvhfofpGQZDLljV52k4"},"username":"raynathan","usernameLower":"raynathan",".key":"NnooaWj4KHVxbhKwO1pEdfaQDsD2"}}}')},5110:function(e,t,s){"use strict";var a=s("6d47"),n=s.n(a);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"main-window"},[s("TheAppMenu"),s("div",{staticClass:"flex-container"},[s("router-view")],1)],1)])},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticStyle:{display:"none"},attrs:{id:"app-menu"}},[s("ul",{staticClass:"list-unstyled components mb-5"},[e._m(0),s("li",{staticClass:"active"},[s("router-link",{attrs:{to:{name:"PageMessages"}}},[s("span",{staticClass:"fa fa-mail-bulk"}),e._v(" Messages")])],1),e._m(1),e._m(2),e._m(3)])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"active"},[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-home"}),e._v(" Home")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-user"}),e._v(" Profile")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-file-invoice-dollar"}),e._v(" Billing")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-cogs"}),e._v(" Settings")])])}],c={name:"TheAppMenu"},l=c,u=s("2877"),m=Object(u["a"])(l,i,o,!1,null,"876964f2",null),f=m.exports,d={components:{TheAppMenu:f}},p=d,g=(s("5c0b"),Object(u["a"])(p,n,r,!1,null,null,null)),h=g.exports,v=(s("d3b7"),s("8c4f")),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"messages"}},[s("TheMessageTabBar",{attrs:{openMessages:e.openMessages}}),s("div",{staticClass:"flex-container mx-2222"},[s("TheMessageSidebar"),s("div",{staticClass:"container-fluid",attrs:{id:"message-content-area"}},[s("router-view")],1)],1)],1)},y=[],j=(s("4de4"),s("07ac"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-bar-row"},[s("nav",{staticClass:"navbar navbar-expand-md tab-bar"},[s("ul",{staticClass:"navbar-nav"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"PageMessageCreate"}}},[s("div",{staticClass:"d-flex"},[s("span",[e._v("New")]),s("span",{staticClass:"d-flex align-content-center p-2"},[s("a",{staticClass:"tab-new",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-plus"})])])])])],1),e._l(e.openMessages,(function(e){return s("TabItem",{key:e[".key"],attrs:{tabbedMessage:e}})}))],2)])])}),_=[],C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"PageMessageView",params:{messageId:this.tabbedMessage[".key"]}}}},[s("div",{staticClass:"d-flex"},[s("span",{staticClass:"d-flex p-2"},[s("i",{staticClass:"fa fa-envelope"})]),s("span",[e._v(e._s(this.tabbedMessage.subject))]),s("span",{staticClass:"d-flex align-content-center p-2"},[s("a",{staticClass:"tab-closer",on:{click:function(t){return t.preventDefault(),e.closeMessage(t)}}},[s("i",{staticClass:"fa fa-times"})])])])])],1)},k=[],w=(s("b0c0"),{name:"TabItem",props:{tabbedMessage:{required:!0,type:Object}},methods:{closeMessage:function(){this.$store.dispatch("closeMessage",this.tabbedMessage),"PageMessageView"===this.$route.name&&parseInt(this.$route.params.messageId,10)===parseInt(this.tabbedMessage[".key"],10)&&(this.$router.go(-1),this.$emit("tabClosed",this.tabbedMessage[".key"]))}}}),M=w,O=(s("c268"),Object(u["a"])(M,C,k,!1,null,"18d01814",null)),I=O.exports,K={name:"TheMessageTabBar",components:{TabItem:I},props:{openMessages:{required:!0,type:Array}}},x=K,T=(s("d692"),Object(u["a"])(x,j,_,!1,null,"268b6efa",null)),F=T.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{attrs:{id:"sidebar"}},[e._m(0),s("MessageFilterList",{attrs:{messageFilters:e.messageFilters}}),s("div",{staticClass:"message-list-header-item"},[e._v("Tools")]),s("MessageToolList",{attrs:{messageTools:e.messageTools}})],1)},P=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar navbar-expand-md message-list-controls"},[s("h1",[e._v("Filters")]),s("span",{staticClass:"message-control-menu fa fa-chevron-left"}),s("span",{staticClass:"message-control-menu fa fa-ellipsis-v"})])}],A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-unstyled components"},e._l(e.messageFilters,(function(e){return s("MessageFilterListItem",{key:e[".key"],attrs:{messageFilter:e}})})),1)},E=[],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"message-filter-list-item"},[s("router-link",{attrs:{to:{name:"PageMessageListView",params:{listId:e.messageFilter[".key"]}}}},[s("span",{staticClass:"fa mr-3",class:e.messageFilter.faIcon}),e._v(" "+e._s(e.messageFilter.name)+" ")])],1)},D=[],z={name:"MessageFilterListItem",props:{messageFilter:{required:!0,type:Object}}},L=z,q=Object(u["a"])(L,S,D,!1,null,"c6efd804",null),W=q.exports,V={name:"MessageFilterList",components:{MessageFilterListItem:W},props:{messageFilters:{required:!0,type:Array}}},R=V,B=Object(u["a"])(R,A,E,!1,null,"02a8001e",null),U=B.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-unstyled components"},e._l(e.messageTools,(function(e){return s("MessageToolListItem",{key:e[".key"],attrs:{messageTool:e}})})),1)},H=[],J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"message-tool-list-item"},[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa mr-3",class:e.messageTool.faIcon}),e._v(" "+e._s(e.messageTool.name))])])},Q=[],N={name:"MessageToolListItem",props:{messageTool:{required:!0,type:Object}}},G=N,X=Object(u["a"])(G,J,Q,!1,null,"27aa24a4",null),Z=X.exports,ee={name:"MessageToolList",components:{MessageToolListItem:Z},props:{messageTools:{required:!0,type:Array}}},te=ee,se=Object(u["a"])(te,Y,H,!1,null,"6572485e",null),ae=se.exports,ne={name:"TheMessageSidebar",components:{MessageToolList:ae,MessageFilterList:U},computed:{messageFilters:function(){return Object.values(this.$store.state.messageFilters)},messageTools:function(){return Object.values(this.$store.state.messageTools)}}},re=ne,ie=(s("2412"),Object(u["a"])(re,$,P,!1,null,"1ddaaa8a",null)),oe=ie.exports,ce={name:"Messages",components:{TheMessageSidebar:oe,TheMessageTabBar:F},computed:{openMessages:function(){var e=this,t=[];return this.$store.state.messageMeta&&(t=Object.values(this.$store.state.messages).filter((function(t){var s=e.$store.state.messageMeta[t[".key"]];return!(!s||!s.isOpen)}))),t}},created:function(){this.$store.dispatch("fetchAllMessageFilters").then((function(e){console.log(e)})),this.$store.dispatch("fetchAllMessageMetaForUser",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllUsers").then((function(e){console.log(e)}))}},le=ce,ue=(s("eac0"),Object(u["a"])(le,b,y,!1,null,"f392a908",null)),me=ue.exports,fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-view-container"},[s("nav",{staticClass:"navbar navbar-expand-md message-bar"},[e.assignable?s("div",[e._m(0)]):s("div",[e._m(1)]),s("h1",[e._v(e._s(e.message.subject))]),e._l(e.teamRecipients,(function(e){return s("AppTeam",{key:e[".key"],attrs:{team:e}})})),e._m(2)],2),e.assignable?s("div",[e._v(" Assignee "),e.isAssigned?s("span",[s("a",{attrs:{href:"#"}},[s("img",{staticClass:"avatar",attrs:{src:e.assignedUser.avatar}})])]):e.assignable?s("span",[e._m(3)]):e._e()]):e._e(),s("div",{staticClass:"message-view",attrs:{id:"message-view"}},[s("div",{staticClass:"reply-item"},[s("div",{staticClass:"media g-mb-30 media-comment"},[s("img",{staticClass:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",attrs:{src:e.from.avatar,alt:e.from.name}}),s("div",{staticClass:"media-body u-shadow-v18 g-bg-secondary g-pa-30"},[s("div",{staticClass:"g-mb-15"},[s("h5",{staticClass:"h5 g-color-gray-dark-v1 mb-0"},[e._v(e._s(e.from.name))]),s("span",{staticClass:"g-color-gray-dark-v4 g-font-size-12"},[s("AppDate",{attrs:{timestamp:e.message.createdAt}})],1)]),s("p",{domProps:{innerHTML:e._s(e.message.body)}}),e._m(4)])])]),s("ReplyList",{attrs:{message:e.message}}),s("div",{attrs:{id:"scroll-to-me"}}),s("div",{staticClass:"message-editor"},[s("TextEditor"),e._m(5)],1)],1)])},de=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-square"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-envelope"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("span",{staticClass:"fa fa-star"}),s("span",[e._v("Follow")])]),s("li",[s("span",{staticClass:"fa fa-keyboard"}),s("span",[e._v("Compose")])]),s("li",[s("span",{staticClass:"fa fa-chevron-down"}),s("span",[e._v("details")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#"}},[s("span",{staticClass:"avatar empty"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-inline d-sm-flex my-0"},[s("li",{staticClass:"list-inline-item g-mr-20"},[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#!"}},[s("i",{staticClass:"fa fa-thumbs-up g-pos-rel g-top-1 g-mr-3"}),e._v(" 178 ")])]),s("li",{staticClass:"list-inline-item g-mr-20"},[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#!"}},[s("i",{staticClass:"fa fa-thumbs-down g-pos-rel g-top-1 g-mr-3"}),e._v(" 34 ")])]),s("li",{staticClass:"list-inline-item ml-auto"},[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#!"}},[s("i",{staticClass:"fa fa-reply g-pos-rel g-top-1 g-mr-3"}),e._v(" Reply ")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-editor-actions-container"},[s("ul",{staticClass:"message-editor-actions"},[s("li",[s("a",{},[e._v("Send")])])])])}],pe=(s("a15b"),s("d81d"),s("b64b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{attrs:{title:e._f("humanFriendlyDate")(e.timestamp)}},[e._v(e._s(e._f("humanFriendlyDate")(e.timestamp)))])}),ge=[],he=s("c1df"),ve=s.n(he),be={name:"AppDate",props:{timestamp:{required:!0,type:String}},filters:{humanFriendlyDate:function(e){var t="",s=ve()().toISOString(),a=ve()(e).toISOString();return t=ve()(a).isSame(s,"hour")?ve()(a).fromNow():ve()(a).isSame(s,"day")?ve()(a).format("[Today at] h:mA"):ve()(a).isSame(s,"week")?ve()(a).format("ddd h:mA"):ve()(a).isSame(s,"month")||ve()(a).isSame(s,"year")?ve()(a).format("MMM D"):ve()(a).format("MMM D, YYYY"),t}}},ye=be,je=Object(u["a"])(ye,pe,ge,!1,null,"6bae160c",null),_e=je.exports,Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-editor",on:{click:e.editorClicked}},[s("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.commands,a=e.isActive;return[s("div",{staticClass:"text-editor-menu-bar"},[s("ul",{staticClass:"button-bar"},[s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.bold}},[s("i",{staticClass:"fa fa-bold"})])]),s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.italic}},[s("i",{staticClass:"fa fa-italic"})])]),s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.underline}},[s("i",{staticClass:"fa fa-underline"})])])])])]}}])}),s("div",{ref:"editor",staticClass:"text-editor-textarea"},[s("editor-content",{attrs:{editor:e.editor}})],1)],1)},ke=[],we=s("cd42"),Me=s("f23d"),Oe={name:"TextEditor",components:{EditorContent:we["b"],EditorMenuBar:we["c"]},methods:{editorClicked:function(){this.editor.focus()}},data:function(){var e=this;return{editor:new we["a"]({content:"",autoFocus:!0,extensions:[new Me["a"],new Me["b"],new Me["c"]]}).on("update",(function(t){var s=t.getHTML,a=s();e.$emit("updateContent",a)}))}},beforeDestroy:function(){this.editor.destroy()}},Ie=Oe,Ke=(s("4b0f"),Object(u["a"])(Ie,Ce,ke,!1,null,"e45e5008",null)),xe=Ke.exports,Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"team badge"},[e._v("#"+e._s(e.team.name))])},Fe=[],$e={name:"AppTeam",props:{team:{required:!0,type:Object}}},Pe=$e,Ae=(s("9fd2"),Object(u["a"])(Pe,Te,Fe,!1,null,"7c81b827",null)),Ee=Ae.exports,Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-list"},e._l(e.replies,(function(e){return s("ReplyListItem",{key:e[".key"],attrs:{reply:e}})})),1)},De=[],ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-item"},[s("div",{staticClass:"media g-mb-30 media-comment"},[s("img",{staticClass:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",attrs:{src:e.from.avatar,alt:e.from.name}}),s("div",{staticClass:"media-body u-shadow-v18 g-bg-secondary g-pa-30"},[s("div",{staticClass:"g-mb-15"},[s("h5",{staticClass:"h5 g-color-gray-dark-v1 mb-0"},[e._v(e._s(e.from.name))]),s("span",{staticClass:"g-color-gray-dark-v4 g-font-size-12"},[s("AppDate",{attrs:{timestamp:e.reply.createdAt}})],1)]),s("p",[e._v(e._s(e.reply.body))]),e._m(0)])])])},Le=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-inline d-sm-flex my-0"},[s("li",{staticClass:"list-inline-item g-mr-20"},[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#!"}},[s("i",{staticClass:"fa fa-thumbs-up g-pos-rel g-top-1 g-mr-3"}),e._v(" 178 ")])]),s("li",{staticClass:"list-inline-item g-mr-20"},[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#!"}},[s("i",{staticClass:"fa fa-thumbs-down g-pos-rel g-top-1 g-mr-3"}),e._v(" 34 ")])]),s("li",{staticClass:"list-inline-item ml-auto"},[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#!"}},[s("i",{staticClass:"fa fa-reply g-pos-rel g-top-1 g-mr-3"}),e._v(" Reply ")])])])}],qe={name:"ReplyListItem",components:{AppDate:_e},props:{reply:{required:!0,type:Object}},computed:{from:function(){return this.$store.state.users[this.reply.userId]}}},We=qe,Ve=(s("6f52"),Object(u["a"])(We,ze,Le,!1,null,"04698f0e",null)),Re=Ve.exports,Be={name:"ReplyList",components:{ReplyListItem:Re},props:{message:{required:!0,type:Object}},computed:{replies:function(){var e=this;return this.message.replies?Object.keys(this.message.replies).map((function(t){return e.$store.state.replies[t]})):[]}}},Ue=Be,Ye=Object(u["a"])(Ue,Se,De,!1,null,"35dc4d46",null),He=Ye.exports,Je={name:"PageViewMessage",components:{ReplyList:He,TextEditor:xe,AppDate:_e,AppTeam:Ee},props:{messageId:{required:!0,type:String}},computed:{message:function(){return this.$store.state.messages[this.messageId]},from:function(){return this.$store.state.users[this.message.userId]},isAssigned:function(){return null!==this.message.assignedTo},assignedUser:function(){var e=this.$store.state.users[this.message.assignedTo];return e},assignable:function(){return!0===this.message.assignable},recipientsList:function(){var e=this;return Object.keys(this.message.recipients.users).map((function(t){return e.$store.state.users[t].name})).join(", ")},teamRecipients:function(){var e=this;return this.message.recipients.teams?Object.keys(this.message.recipients.teams).map((function(t){return e.$store.state.teams[t]})):[]}},mounted:function(){var e=document.getElementById("message-view");e.scrollTop=e.scrollHeight},created:function(){this.$store.dispatch("fetchMessage",{messageId:this.messageId}).then((function(e){console.log(e.subject)}))}},Qe=Je,Ne=(s("6d27"),Object(u["a"])(Qe,fe,de,!1,null,"01f4bbf0",null)),Ge=Ne.exports,Xe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MessageList",{attrs:{messages:e.messages}})},Ze=[],et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-list"},[s("div",{staticClass:"message-filters"},[s("div",{staticClass:"search-container"},[s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"Search..",name:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),s("i",{staticClass:"fa fa-search search-span"})])])]),s("div",{staticClass:"tableFixHead"},[s("table",{staticClass:"table message-list-table"},[e._m(0),s("tbody",e._l(e.filteredMesssages,(function(e){return s("MessageListItem",{key:e[".key"],attrs:{message:e}})})),1)])])])},tt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",{staticClass:"checkbox"},[s("input",{attrs:{type:"checkbox"}})]),s("th",{staticClass:"status"},[e._v("Status")]),s("th",{staticClass:"message"},[e._v("Message")]),s("th",{staticClass:"indicators"},[e._v("Indicators")]),s("th",{staticClass:"participants"},[e._v("Participants")]),s("th",{staticClass:"created-date"},[e._v("Created")]),s("th",{staticClass:"actions"},[e._v("Actions")])])])}],st=(s("caad"),s("45fc"),s("ac1f"),s("25f0"),s("2532"),s("841c"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",{staticClass:"message-list-item",class:{assignable:e.assignable}},[e._m(0),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("StatusPopper",{attrs:{status:e.messageStatus},on:{"change-message-status":e.changeMessageStatus}})],1)])]),s("td",{staticClass:"view-details",on:{click:function(t){return e.viewMessage()}}},[s("div",{staticClass:"subject"},[s("span",{class:{unread:e.unread}},[e._v(e._s(e.message.subject))]),e._l(e.tags,(function(e){return s("TagItem",{key:e[".key"],attrs:{tag:e}})}))],2),s("div",{staticClass:"preview"},[e._v(e._s(e.messagePreview))]),s("div",{staticClass:"attachments"},e._l(e.attachments,(function(e){return s("AttachmentItem",{key:e[".key"],attrs:{attachment:e}})})),1)]),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("span",{staticClass:"far fa-comment-alt"}),e._v(" "+e._s(e.replyCount))]),e.hasViewers?s("li",[s("span",{staticClass:"fa fa-eye",attrs:{title:e.viewersList}})]):s("li",[s("span")])])]),s("td",[s("div",[s("span",{class:{unread:e.unread}},[e._v(e._s(e.fromName))])]),s("div",{staticClass:"actors"},[e._l(e.teamRecipients,(function(e){return s("AppTeam",{key:e[".key"],attrs:{team:e}})})),e._v(" "),s("span",{staticClass:"recipient-list"},[e._v(e._s(e.recipientsList))])],2)]),s("td",[s("span",{class:{unread:e.unread}},[s("AppDate",{attrs:{timestamp:this.message.createdAt}})],1)]),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[e.isAssigned?s("li",[s("a",{attrs:{href:"#"}},[s("img",{staticClass:"avatar",attrs:{src:e.assignedUser.avatar}})])]):s("li",[e._m(1)]),e._m(2)])])])}),at=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("td",[s("input",{attrs:{type:"checkbox"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#"}},[s("span",{staticClass:"avatar empty"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-archive"})])])}],nt=(s("fb6a"),s("5319"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"badge bg-gray"},[e._v(e._s(e.tag.name))])}),rt=[],it={name:"TagItem",props:{tag:{required:!0,type:Object}}},ot=it,ct=Object(u["a"])(ot,nt,rt,!1,null,"5652b663",null),lt=ct.exports,ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"attachment badge",class:[e.attachment.type],on:{click:function(t){return t.stopPropagation(),e.viewAttachment()}}},[s("span",{staticClass:"fa attachment-name",class:e.icon}),e._v(" "),s("span",{staticClass:"attachment-name"},[e._v(e._s(e.attachment.name))])])},mt=[],ft={name:"AttachmentItem",props:{attachment:{required:!0,type:Object}},methods:{viewAttachment:function(){var e=this;"document"===this.attachment.type&&this.$store.dispatch("fetchPreview",{attachment:this.attachment}).then((function(t){e.$router.push({name:"PagePDFVue",params:{fileId:t[".key"]}})}))}},computed:{icon:function(){var e="fa-file";return"document"===this.attachment.type?e="fa-file":"patient"===this.attachment.type&&(e="fa-user"),e}}},dt=ft,pt=(s("4780"),Object(u["a"])(dt,ut,mt,!1,null,"384d2a94",null)),gt=pt.exports,ht=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Popper",{ref:"popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"right"}}},[s("div",{staticClass:"popper"},e._l(e.statusOptions,(function(t){return s("StatusPopperItem",{key:t[".key"],attrs:{status:t},on:{"change-status":e.changeStatus}})})),1),s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"status",class:this.status.iconClass,style:{color:this.status.color}})])])],1)},vt=[],bt=s("526e"),yt=s.n(bt),jt=(s("a101"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"status-item",attrs:{href:"#"},on:{click:function(t){return e.changeStatus()}}},[s("span",{style:{color:e.statusColor}},[s("span",{class:e.statusIconClass}),e._v(" "+e._s(e.statusTitle)+" ")])])}),_t=[],Ct={name:"StatusPopperItem",props:{status:{required:!0,type:Object}},methods:{changeStatus:function(){this.$emit("change-status",this.status)}},computed:{statusColor:function(){return this.status.color},statusTitle:function(){return this.status.title},statusIconClass:function(){return this.status.iconClass}}},kt=Ct,wt=Object(u["a"])(kt,jt,_t,!1,null,"26713fa7",null),Mt=wt.exports,Ot={name:"StatusPopper",components:{StatusPopperItem:Mt,Popper:yt.a},props:{status:{required:!0,type:Object}},data:function(){return{currentStatus:"new"}},computed:{statusOptions:function(){return this.$store.state.messageOptions.statusOptions}},methods:{changeStatus:function(e){this.status=e,this.$refs.popper.doClose(),this.$emit("change-message-status",this.status)}}},It=Ot,Kt=(s("d6fb"),Object(u["a"])(It,ht,vt,!1,null,"205b0301",null)),xt=Kt.exports,Tt={name:"MessageListItem",components:{StatusPopper:xt,AppTeam:Ee,AppDate:_e,AttachmentItem:gt,TagItem:lt},props:{message:{required:!0,type:Object}},methods:{viewMessage:function(){this.$router.push({name:"PageMessageView",params:{messageId:this.message[".key"]}}),this.$store.dispatch("openMessage",this.message)},takeOwnership:function(){this.$store.dispatch("takeOwnership",{message:this.message,userId:1})},changeMessageStatus:function(e){this.$store.dispatch("setMessageStatus",{message:this.message,status:e})}},computed:{unread:function(){return!(!this.message.userMeta||!this.message.userMeta.isRead)},messageStatus:function(){return this.$store.state.messageOptions.statusOptions[this.message.status]},messagePreview:function(){var e=this.message.body.replace(/(<([^>]+)>)/gi," ");return e.length>80?e.slice(0,80)+"...":e},replyCount:function(){var e=0;return this.message.replies&&(e=Object.keys(this.message.replies).length),e},isAssigned:function(){return null!==this.message.assignedTo},assignedUser:function(){var e=this.$store.state.users[this.message.assignedTo];return e},assignable:function(){return!0===this.message.assignable},attachments:function(){var e=this;if(this.message.attachments){var t=Object.keys(this.message.attachments),s=t.map((function(t){return e.$store.state.attachments[t]}));return s}return[]},tags:function(){var e=this;if(this.message.tags){var t=Object.keys(this.message.tags).map((function(t){return e.$store.state.tags[t]}));return t}return[]},fromName:function(){return this.$store.state.users[this.message.userId].name},viewersList:function(){var e=this,t=[];this.message.viewers&&(t=Object.keys(this.message.viewers));var s="";s=t.length>1?" are viewing":" is viewing";var a=t.map((function(t){return e.$store.state.users[t].name})).join(", ");return a+s},hasViewers:function(){var e=[];return this.message.viewers&&(e=Object.keys(this.message.viewers)),e.length>0},recipientsList:function(){var e=this;return Object.keys(this.message.recipients.users).map((function(t){return e.$store.state.users[t].name})).join(", ")},teamRecipients:function(){var e=this;return Object.keys(this.message.recipients.teams).map((function(t){return e.$store.state.teams[t]}))}}},Ft=Tt,$t=(s("3ac4"),Object(u["a"])(Ft,st,at,!1,null,"0fbc380c",null)),Pt=$t.exports,At={name:"MessageList",components:{MessageListItem:Pt},data:function(){return{search:""}},props:{messages:{required:!0,type:Array}},computed:{filteredMesssages:function(){var e=this;if(this.search){var t=this.messages.filter((function(t){var s=Object.values(t);return s.some((function(t){var s=!1;return t&&("string"===typeof t&&t.includes(e.search)||t.toString(10).includes(e.search))&&(s=!0),s}))}));return t}return this.messages}}},Et=At,St=(s("5110"),Object(u["a"])(Et,et,tt,!1,null,"9eedcfc4",null)),Dt=St.exports,zt={name:"PageViewMessageList",components:{MessageList:Dt},props:{listId:{required:!0,type:String}},computed:{messages:function(){var e=this;return this.$store.state.messageFilters[this.listId]?Object.keys(this.$store.state.messageFilters[this.listId].messages).map((function(t){return e.$store.state.messages[t]})):[]}}},Lt=zt,qt=Object(u["a"])(Lt,Xe,Ze,!1,null,"6ed5d0fe",null),Wt=qt.exports,Vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-view"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],staticClass:"form-input",attrs:{type:"text",id:"message_subject",name:"subject"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("FieldUserSelect",{on:{updateRecipients:function(t){e.recipients=t}}})],1),s("div",{staticClass:"form-group"},[s("TextEditor",{on:{updateContent:function(t){e.body=t}}})],1),e._m(0)])])},Rt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-ghost"},[e._v("Cancel")]),s("button",{staticClass:"btn btn-blue",attrs:{type:"submit",name:"Publish"}},[e._v("Publish ")])])}],Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-select"},[s("vue-tags-input",{staticClass:"tags-input",attrs:{placeholder:"Select users or teams",tags:e.tags,"allow-edit-tags":!1,"autocomplete-items":e.filteredUsers},on:{"tags-changed":e.updateRecipients},scopedSlots:e._u([{key:"autocomplete-item",fn:function(t){return s("div",{staticClass:"my-item",on:{click:function(e){return t.performAdd(t.item)}}},[s("img",{staticClass:"avatar",attrs:{src:t.item.avatar}}),e._v(" "+e._s(t.item.text)+" ")])}},{key:"tag-left",fn:function(e){return s("div",{staticClass:"my-tag-left",on:{click:function(t){return e.performOpenEdit(e.index)}}},[s("img",{staticClass:"avatar",attrs:{src:e.tag.avatar}})])}}]),model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1)},Ut=[],Yt=s("c7a0"),Ht=s.n(Yt),Jt={name:"FieldUserSelect",components:{VueTagsInput:Ht.a},props:{users:{required:!1,type:Array}},data:function(){return{tag:"",separators:[";",","],tags:[]}},methods:{updateRecipients:function(e){this.tags=e,this.$emit("updateRecipients",this.tags)}},computed:{filteredUsers:function(){return Object.values(this.$store.state.users).map((function(e){return{text:e.username,avatar:e.avatar,id:e[".key"]}}))}}},Qt=Jt,Nt=Object(u["a"])(Qt,Bt,Ut,!1,null,"a0794a7e",null),Gt=Nt.exports,Xt={name:"PageMessageCreate",components:{FieldUserSelect:Gt,TextEditor:xe},data:function(){return{subject:"",body:"",recipients:[],attachments:[]}},methods:{save:function(){var e=this,t={subject:this.subject,body:this.body,recipients:this.recipients};this.$emit("save",{message:t}),this.$store.dispatch("createMessage",t).then((function(t){e.$router.push({name:"PageMessageView",params:{messageId:t[".key"]}}),e.$store.dispatch("openMessage",t)}))}}},Zt=Xt,es=Object(u["a"])(Zt,Vt,Rt,!1,null,"7abdda90",null),ts=es.exports,ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fullscreen"},[s("nav",{staticClass:"navbar navbar-dark sticky-top"},[s("h1",{staticClass:"navbar-brand"},[e._v(e._s(e.filename))]),s("ul",{staticClass:"nav navbar-nav ml-auto"},[e.edit?s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doView()}}},[s("span",{staticClass:"fas fa-eye"})])]):s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doEdit()}}},[s("span",{staticClass:"fas fa-edit"})])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadWithAxios()}}},[s("span",{staticClass:"fas fa-download"})])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$refs.pdf[0].print()}}},[s("span",{staticClass:"fas fa-print"})])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.closeFile()}}},[s("span",{staticClass:"fas fa-times"})])])])]),s("div",{staticClass:"canvas-container"},[e.edit?s("div",[s("tinymce",{attrs:{id:"tinymce-editor",plugins:e.plugins,toolbar1:e.toolbar1,toolbar2:e.toolbar2,other_options:e.tinyOptions},on:{"on-save":function(t){return e.save()}},model:{value:e.editorContent,callback:function(t){e.editorContent=t},expression:"editorContent"}})],1):s("div",e._l(e.numPages,(function(t){return s("pdf",{key:t,ref:"pdf",refInFor:!0,staticClass:"canvas",attrs:{src:e.url,page:t}})})),1)])])},as=[],ns=(s("3ca3"),s("ddb0"),s("2b3d"),s("858e")),rs=s("bc3a"),is=s.n(rs),os=s("2cbf"),cs="",ls={components:{tinymce:os["a"],pdf:ns["a"]},props:{fileId:{required:!0,type:String},edit:{type:Boolean,default:!1}},data:function(){return{numPages:void 0,editorContent:"",tinyOptions:{height:"500px",width:"100%",menubar:!1},plugins:["save advlist autolink lists image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar1:"save | undo redo | formatselect | bold italic backcolor forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",toolbar2:""}},computed:{attachment:function(){return this.$store.state.attachments[this.file.attachmentId]},file:function(){return this.$store.state.files[this.fileId]},url:function(){var e=this.file.pointer;return e},htmlValue:function(){return""},filename:function(){return this.attachment.name}},watch:{fileId:function(e,t){var s=this;this.url&&!1===this.edit?(cs=ns["a"].createLoadingTask(this.url),cs.promise.then((function(e){s.numPages=e.numPages}))):this.url&&!0===this.edit&&is.a.get(this.url).then((function(e){s.editorContent=e.data}))}},methods:{closeFile:function(){this.edit?this.$router.go(-2):this.$router.back()},doEdit:function(){var e=this;this.$store.dispatch("fetchHtml",{attachment:this.attachment}).then((function(t){e.$router.push({name:"PagePDFEdit",params:{fileId:t[".key"],edit:!0}})}))},doView:function(){this.$router.back()},save:function(){this.$store.dispatch("pushHtml",{file:this.file,content:this.editorContent})},forceFileDownload:function(e){var t=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=t,s.setAttribute("download",this.filename+"."+this.file.type),document.body.appendChild(s),s.click()},downloadWithAxios:function(){var e=this;is()({method:"get",url:this.url,responseType:"arraybuffer"}).then((function(t){e.forceFileDownload(t)})).catch((function(){return console.log("error occured")}))}},mounted:function(){var e=this;this.url&&!1===this.edit?(cs=ns["a"].createLoadingTask(this.url),cs.promise.then((function(t){e.numPages=t.numPages}))):this.url&&is.a.get(this.url).then((function(t){e.editorContent=t.data}))}},us=ls,ms=(s("61f3"),Object(u["a"])(us,ss,as,!1,null,"2ae6c22c",null)),fs=ms.exports;a["a"].use(v["a"]);var ds=[{path:"/",redirect:"/messages"},{path:"/about",name:"About",component:function(){return s.e("about").then(s.bind(null,"f820"))}},{path:"/attachment/edit/:fileId",name:"PagePDFEdit",component:fs,props:!0},{path:"/attachment/:fileId",name:"PagePDFVue",component:fs,props:!0},{path:"/messages",name:"PageMessages",component:me,children:[{path:"message/:messageId",name:"PageMessageView",component:Ge,props:!0},{path:"message/create",name:"PageMessageCreate",component:ts},{path:"list/:listId",name:"PageMessageListView",component:Wt,props:!0}]}],ps=new v["a"]({mode:"history",base:"/interface/modules/custom_modules/oe-mi-messages/client/",routes:ds}),gs=ps,hs=(s("4160"),s("159b"),s("5530")),vs=s("2f62"),bs=s("5033");a["a"].use(vs["a"]);var ys="",js=new vs["a"].Store({state:Object(hs["a"])({},bs,{userState:{openTabs:{},activeFilter:"1"},messageOptions:{statusOptions:{"in-progress":{".key":"in-progress",color:"#c8c8c8",iconClass:"far fa-check-circle",title:"In-Progress"},new:{".key":"new",color:"#3e5e8e",iconClass:"far fa-check-circle",title:"New"},complete:{".key":"complete",color:"#17d923",iconClass:"fas fa-check-circle",title:"Complete"}}},messageMeta:{},jobs:{},attachments:{},files:{},messageFilters:{},messageTools:{},messages:{},replies:{},authId:"4"}),actions:{openMessage:function(e,t){var s=e.commit,a=e.state,n=t[".key"];return is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!open_message",{params:{userId:a.authId,messageId:n}}).then((function(e){var t=e.data;s("setMessageMeta",{messageMeta:t,messageId:n})}))},closeMessage:function(e,t){var s=e.commit,a=e.state,n=t[".key"];return is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!close_message",{params:{userId:a.authId,messageId:n}}).then((function(e){var t=e.data;s("setMessageMeta",{messageMeta:t,messageId:n})}))},takeOwnership:function(e,t){e.commit,t.message,t.userId},setMessageStatus:function(e,t){var s=e.commit,a=(e.state,t.message),n=t.status;return a.status=n[".key"],is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!set_message_status",{params:{status:a.status,messageId:a[".key"]}}).then((function(e){return s("setMessage",{message:a,messageId:a[".key"]}),e.data}))},createMessage:function(e,t){var s=e.commit,a=e.state,n="greatMessage"+Math.random();return t[".key"]=n,t.userId=a.authId,t.createdAt=Math.floor(Date.now()/1e3),s("setMessage",{message:t,messageId:n}),s("appendMessageToUserSent",{userId:t.userId,messageId:n}),Promise.resolve(a.messages[n])},fetchPreview:function(e,t){var s=e.state,a=e.commit,n=t.attachment;return is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!fetch_pdf",{params:{attachmentId:n[".key"]}}).then((function(e){var t=e.data;return a("setFile",{file:Object(hs["a"])({},t,{".key":t.id}),fileId:t.id}),s.files[t.id]}))},fetchHtml:function(e,t){var s=e.state,a=e.commit,n=t.attachment;return is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!fetch_html",{params:{attachmentId:n[".key"]}}).then((function(e){var t=e.data;return a("setFile",{file:Object(hs["a"])({},t,{".key":t.id}),fileId:t.id}),s.files[t.id]}))},pushHtml:function(e,t){e.state,e.commit;var s=t.file,a=t.content;return is.a.post(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!push_html",{fileId:s[".key"],content:a}).then((function(e){return"success"}))},fetchMessage:function(e,t){var s=e.state,a=e.commit,n=t.id;return new Promise((function(e,t){is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_message",{params:{id:n}}).then((function(t){var n=t.data,r={};n.attachments.forEach((function(e){r[e.id]=e.id}));var i={users:{2:"2",3:"3"},teams:{}},o=null;a("setMessage",{message:Object(hs["a"])({},n,{".key":n.id,attachments:r,recipients:i,assignedTo:o}),messageId:n.id}),e(s.messages[n.id])}))}))},fetchAllMessageMetaForUser:function(e,t){var s=e.state,a=e.commit,n=t.userId;return new Promise((function(e,t){is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_message_meta_for_user",{params:{userId:n}}).then((function(t){var n=t.data;n.forEach((function(e){a("setMessageMeta",{messageMeta:Object(hs["a"])({},e,{".key":e.messageId}),messageId:e.messageId})})),e(s.messageMeta)}))}))},fetchAllMessageFilters:function(e){var t=e.state,s=e.commit;return window.addEventListener("unhandledrejection",(function(e){console.log(e)})),is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_message_filters").then((function(e){var a=Object.values(e.data);return a.forEach((function(e){var t={};e.messages.forEach((function(e){t[e.id]=e.id})),s("setMessageFilter",{messageFilter:Object(hs["a"])({},e,{".key":e.id,messages:t}),messageFilterId:e.id}),e.messages.forEach((function(e){var t={users:{2:"2",3:"3"},teams:{}},a=null,n={};e.attachments.forEach((function(e){n[e.id]=e.id})),s("setMessage",{message:Object(hs["a"])({},e,{".key":e.id,recipients:t,attachments:n,assignedTo:a}),messageId:e.id}),e.attachments.forEach((function(e){s("setAttachment",{attachment:Object(hs["a"])({},e,{".key":e.id}),attachmentId:e.id})}))}))})),t.messageFilters})).catch((function(e){console.error(e)}))},fetchAllUsers:function(e){var t=e.state,s=e.commit;return new Promise((function(e,a){is.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_users").then((function(a){var n=Object.values(a.data);n.forEach((function(e){s("setUser",{user:Object(hs["a"])({},e,{".key":e.id}),userId:e.id})})),e(t.users)}))}))}},mutations:{setJob:function(e,t){var s=t.job,n=t.jobId;a["a"].set(e.jobs,n,s)},setFile:function(e,t){var s=t.file,n=t.fileId;a["a"].set(e.files,n,s)},setMessage:function(e,t){var s=t.message,n=t.messageId;a["a"].set(e.messages,n,s)},setMessageMeta:function(e,t){var s=t.messageMeta,n=t.messageId;a["a"].set(e.messageMeta,n,s)},setUser:function(e,t){var s=t.user,n=t.userId;a["a"].set(e.users,n,s)},setAttachment:function(e,t){var s=t.attachment,n=t.attachmentId;a["a"].set(e.attachments,n,s)},setMessageFilter:function(e,t){var s=t.messageFilter,n=t.messageFilterId;a["a"].set(e.messageFilters,n,s)},appendMessageToUserSent:function(e,t){var s=t.messageId,n=t.userId,r=e.users[n];r.sent||a["a"].set(r,"sent",{}),a["a"].set(r.sent,s,s)},appendMessageToOpenMessages:function(e,t){t.message;var s=t.messageId;a["a"].set(e.messageMeta[s],s,s)},removeMessageFromOpenMessages:function(e,t){t.message;var s=t.messageId;a["a"].delete(e.userState.openTabs,s,s)}},modules:{}});a["a"].config.productionTip=!1,new a["a"]({router:gs,store:js,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},"61f3":function(e,t,s){"use strict";var a=s("be2c"),n=s.n(a);n.a},"6d27":function(e,t,s){"use strict";var a=s("2a0f"),n=s.n(a);n.a},"6d47":function(e,t,s){},"6d78":function(e,t,s){},"6f52":function(e,t,s){"use strict";var a=s("6d78"),n=s.n(a);n.a},"8abc":function(e,t,s){},"95f7":function(e,t,s){},"9c0c":function(e,t,s){},"9fd2":function(e,t,s){"use strict";var a=s("e2a1"),n=s.n(a);n.a},a565:function(e,t,s){},acb1:function(e,t,s){},be2c:function(e,t,s){},c268:function(e,t,s){"use strict";var a=s("8abc"),n=s.n(a);n.a},d0bb:function(e,t,s){},d14d:function(e,t,s){},d692:function(e,t,s){"use strict";var a=s("d0bb"),n=s.n(a);n.a},d6fb:function(e,t,s){"use strict";var a=s("95f7"),n=s.n(a);n.a},e2a1:function(e,t,s){},eac0:function(e,t,s){"use strict";var a=s("d14d"),n=s.n(a);n.a}});
//# sourceMappingURL=app.4edeafc8.js.map