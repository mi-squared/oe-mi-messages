(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={app:0},i=[];function r(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"c46328a4"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(e){var t=[],s=n[e];if(0!==s)if(s)t.push(s[2]);else{var a=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=r(e);var l=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(u);var s=n[e];if(0!==s){if(s){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,s[1](l)}n[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/openemr/interface/modules/custom_modules/oe-mi-messages/client/dist/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"06d3":function(e,t,s){"use strict";var a=s("980f"),n=s.n(a);n.a},"073d":function(e,t,s){"use strict";var a=s("0efb"),n=s.n(a);n.a},"0944":function(e,t,s){"use strict";var a=s("3274"),n=s.n(a);n.a},"0efb":function(e,t,s){},1:function(e,t){},"123d":function(e,t,s){},2:function(e,t){},"2d60":function(e,t,s){"use strict";var a=s("d5ef"),n=s.n(a);n.a},3:function(e,t){},3274:function(e,t,s){},"3b82":function(e,t,s){},"3bc2":function(e,t,s){"use strict";var a=s("a913"),n=s.n(a);n.a},4:function(e,t){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="4678"},4907:function(e,t,s){"use strict";var a=s("d828"),n=s.n(a);n.a},"4b0f":function(e,t,s){"use strict";var a=s("123d"),n=s.n(a);n.a},"4ec2":function(e,t,s){},5:function(e,t){},5033:function(e){e.exports=JSON.parse('{"userState":{"openTabs":{},"activeFilter":"1","showNew":false},"teams":{"1":{"name":"intern-group","faIcon":"fa-hashtag","messages":{"102":"102"},"users":{"1":"1","2":"2"},".key":"1"}},"messageFilters":{"1":{"messages":{"100":"100","101":"101","102":"102"},"name":"Inbox","type":"filter","faIcon":"fa-inbox",".key":"1"},"2":{"messages":{"101":"101"},"name":"Sent","type":"filter","faIcon":"fa-paper-plane",".key":"2"},"3":{"messages":{},"name":"Upcoming","type":"filter","faIcon":"fa-clock",".key":"3"},"4":{"messages":{},"name":"Archive","type":"filter","faIcon":"fa-archive",".key":"4"},"5":{"messages":{},"name":"Files","type":"filter","faIcon":"fa-file",".key":"5"}},"messageTools":{"1":{"name":"Configure","faIcon":"fa-cog",".key":"1"}},"tags":{"balloons":{"name":"balloons",".key":"balloons"},"games":{"name":"games",".key":"games"}},"files":{"2000":{"name":"Patient_3000.pdf","type":"pdf","url":"http://Patient_3000.pdf",".key":"2000"}},"messages":{"100":{"subject":"Announcements","body":"Important announcements about the forum.","type":"message","isRead":false,"status":"new","assignable":false,"assignedTo":null,"replies":{"150":"150","151":"151"},"forwards":{},"viewers":{},"recipients":{"users":{"2":"2","3":"3"},"teams":{}},"tags":{"balloons":"baloons","games":"games"},"attachments":{},"userId":"1","createdAt":1589811377,".key":"100"},"101":{"subject":"Cats","body":"There is a cat outside.","type":"message","isRead":true,"status":"complete","assignable":true,"assignedTo":null,"replies":{},"forwards":{},"viewers":{"3":"3"},"recipients":{"users":{"3":"3"},"teams":{}},"attachments":{"2000":"2000"},"tags":{},"userId":"1","createdAt":1504040497,".key":"101"},"102":{"subject":"Take out the trash","body":"Will somebody please take out the trash?","type":"message","isRead":true,"status":"new","assignable":true,"assignedTo":"1","viewers":{},"replies":{},"forwards":{},"recipients":{"users":{"1":"1","2":"2","3":"3","4":"4"},"teams":{"1":"1"}},"attachments":{"2000":"2000"},"tags":{},"userId":"1","createdAt":1504040497,".key":"102"}},"replies":{"150":{"body":"Reply to announcements about the forum.","type":"reply","parentId":"100","forwards":{},"attachments":{},"tags":{},"userId":"4","createdAt":1504040497,".key":"150"},"151":{"body":"I can\'t there are cats outside!!!!!","type":"reply","parentId":"100","forwards":{},"attachments":{},"tags":{},"userId":"2","createdAt":1504040497,".key":"151"}},"users":{"1":{"avatar":"https://avatars3.githubusercontent.com/u/2327556?v=4&s=460","email":"chrisvfritz@gmail.com","lastVisitAt":1504772078,"name":"Chris Fritz","registeredAt":1504632260,"username":"chrisvfritz","usernameLower":"chrisvfritz",".key":"1"},"2":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Ftunajoe?alt=media&token=dcc2eb1d-81a5-4e82-8774-bb97be7c3128","bio":"Love to fish. Work to fish","email":"tunajoe@gmail.com","lastVisitAt":1507227517,"name":"Joey Williams","posts":{"-Kvd3TvfJogbWreitADe":"-Kvd3TvfJogbWreitADe","-KvdBp4adHJpppQWc3sJ":"-KvdBp4adHJpppQWc3sJ","-KvdDmJtvxFMHECuKKLX":"-KvdDmJtvxFMHECuKKLX","-KvdFbzM8tu64CKVW60V":"-KvdFbzM8tu64CKVW60V","-KvfyDwSUGBojOO4OKyY":"-KvfyDwSUGBojOO4OKyY","-KvgM0hiRDPqJzuJgnLv":"-KvgM0hiRDPqJzuJgnLv","-KvgOAeYDKON22qBjHWR":"-KvgOAeYDKON22qBjHWR","-KvgWFVq1pX_QbFmlG-5":"-KvgWFVq1pX_QbFmlG-5","-KvgWYb4YkaFCfCzA_Ck":"-KvgWYb4YkaFCfCzA_Ck","-KvgbTO3-L9eOTzrxhs3":"-KvgbTO3-L9eOTzrxhs3","-KvgeSqPO7yMjOPbSYB2":"-KvgeSqPO7yMjOPbSYB2"},"registeredAt":1507148598,"threads":{"-Kvd3TvfJogbWreitADd":"-Kvd3TvfJogbWreitADd","-KvdBp4adHJpppQWc3sI":"-KvdBp4adHJpppQWc3sI","-KvdDmJtvxFMHECuKKLW":"-KvdDmJtvxFMHECuKKLW","-KvfyDwSUGBojOO4OKyX":"-KvfyDwSUGBojOO4OKyX","-KvgOAeYDKON22qBjHWQ":"-KvgOAeYDKON22qBjHWQ","-KvgWYb4YkaFCfCzA_Cj":"-KvgWYb4YkaFCfCzA_Cj","-KvgeSqPO7yMjOPbSYB1":"-KvgeSqPO7yMjOPbSYB1"},"username":"tunajoe","usernameLower":"tunajoe",".key":"2"},"3":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Frah?alt=media&token=7ad21914-a4f4-4ad0-add6-17e6d3ae9679","bio":"Now this is a story all about how my life got flipped-turned upside down and I\'d like to take a minute just sit right there i\'ll tell you how I became the prince of a town called Bel-Air.","email":"rolf@rah.no","lastVisitAt":1509628794,"name":"Rolf","posts":{"-KsjWehQ--apjDBwSBCZ":"-KsjWehQ--apjDBwSBCZ","-KvcmrN1WpXOUp1yWrJd":"-KvcmrN1WpXOUp1yWrJd","-KvdFThKmnsu9kXOlS3N":"-KvdFThKmnsu9kXOlS3N","-KvdFe4GnBBURhuRY5OZ":"-KvdFe4GnBBURhuRY5OZ","-KvgjI6bfbWYlbYV5nds":"-KvgjI6bfbWYlbYV5nds"},"registeredAt":1504025541,"threads":{"-KsjWehQ--apjDBwSBCY":"-KsjWehQ--apjDBwSBCY","-KvcmrN1WpXOUp1yWrJc":"-KvcmrN1WpXOUp1yWrJc","-KvgjI6bfbWYlbYV5ndr":"-KvgjI6bfbWYlbYV5ndr"},"twitter":"rahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaugrahaug","username":"rah","usernameLower":"rah","website":"http://rah.no",".key":"3"},"4":{"avatar":"http://i0.kym-cdn.com/photos/images/facebook/000/010/934/46623-batman_pikachu_super.png","bio":"I\'m Batman!","email":"man@batmail.com","lastVisitAt":1509978791,"name":"Bruce Wayne","posts":{"-KsjnAAjzfpznUVh4DSa":"-KsjnAAjzfpznUVh4DSa","-KsjrmB3IBCu-u-09qQb":"-KsjrmB3IBCu-u-09qQb","-KsjtRwwzHCcV55pKaQ-":"-KsjtRwwzHCcV55pKaQ-","-KsjxMazDmuyf0VMVbCG":"-KsjxMazDmuyf0VMVbCG","-Kvcpl2lxtVztykr82Bv":"-Kvcpl2lxtVztykr82Bv","-Kvd-w-TTMc3Wj-U5JFx":"-Kvd-w-TTMc3Wj-U5JFx","-KvgTpPYkAoq8WoSz46g":"-KvgTpPYkAoq8WoSz46g","-Kvhg7cQD_anWm8x-WYT":"-Kvhg7cQD_anWm8x-WYT","-KvhjGrRB9SpbH67jqbq":"-KvhjGrRB9SpbH67jqbq"},"registeredAt":1504038930,"username":"batman","usernameLower":"batman",".key":"4"},"NnooaWj4KHVxbhKwO1pEdfaQDsD2":{"avatar":"https://firebasestorage.googleapis.com/v0/b/forum-2a982.appspot.com/o/images%2Favatars%2Fraynathan?alt=media&token=bd9a0f0e-60f2-4e60-b092-77d1ded50a7e","email":"raynathan@gmail.com","lastVisitAt":1507312801,"name":"Ray-Nathan James","posts":{"-Kvfw0huq0j2O00bOiWd":"-Kvfw0huq0j2O00bOiWd","-KvfyiF5JP_DJ4HwRhRd":"-KvfyiF5JP_DJ4HwRhRd","-Kvfz9EMh1i8uvLRrEGz":"-Kvfz9EMh1i8uvLRrEGz","-KvgMqM-1LXi7MqOHGvv":"-KvgMqM-1LXi7MqOHGvv","-KvggPpwnevwqHunhXy9":"-KvggPpwnevwqHunhXy9","-KvggXxCEyQQlq6Z3gn0":"-KvggXxCEyQQlq6Z3gn0","-KvggzbFFFwafR2UV2PP":"-KvggzbFFFwafR2UV2PP","-Kvgi7kwtMGggjy3hRPO":"-Kvgi7kwtMGggjy3hRPO","-Kvhfofql-5yAv3TxH2M":"-Kvhfofql-5yAv3TxH2M","-KvhhwVAy5847Uvyw6rT":"-KvhhwVAy5847Uvyw6rT"},"registeredAt":1507196808,"threads":{"-Kvfz9ELFDiz_50c1axQ":"-Kvfz9ELFDiz_50c1axQ","-KvggPpwnevwqHunhXy8":"-KvggPpwnevwqHunhXy8","-KvggzbFFFwafR2UV2PO":"-KvggzbFFFwafR2UV2PO","-Kvgi7kwtMGggjy3hRPN":"-Kvgi7kwtMGggjy3hRPN","-KvhfofpGQZDLljV52k4":"-KvhfofpGQZDLljV52k4"},"username":"raynathan","usernameLower":"raynathan",".key":"NnooaWj4KHVxbhKwO1pEdfaQDsD2"}}}')},"55aa":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"main-window"},[s("TheAppMenu"),s("div",{staticClass:"flex-container"},[s("router-view")],1)],1)])},i=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticStyle:{display:"none"},attrs:{id:"app-menu"}},[s("ul",{staticClass:"list-unstyled components mb-5"},[e._m(0),s("li",{staticClass:"active"},[s("router-link",{attrs:{to:{name:"PageMessages"}}},[s("span",{staticClass:"fa fa-mail-bulk"}),e._v(" Messages")])],1),e._m(1),e._m(2),e._m(3)])])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"active"},[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-home"}),e._v(" Home")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-user"}),e._v(" Profile")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-file-invoice-dollar"}),e._v(" Billing")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa fa-cogs"}),e._v(" Settings")])])}],c={name:"TheAppMenu"},l=c,u=s("2877"),m=Object(u["a"])(l,r,o,!1,null,"876964f2",null),d=m.exports,f={components:{TheAppMenu:d}},p=f,g=(s("5c0b"),Object(u["a"])(p,n,i,!1,null,null,null)),h=g.exports,v=(s("d3b7"),s("8c4f")),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"messages"}},[s("TheMessageTabBar",{attrs:{openMessages:e.openMessages}}),s("div",{staticClass:"flex-container mx-2222"},[s("TheMessageSidebar"),s("div",{staticClass:"container-fluid",attrs:{id:"message-content-area"}},[s("router-view")],1)],1)],1)},y=[],j=(s("4de4"),s("07ac"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-bar-row"},[s("nav",{staticClass:"navbar navbar-expand-md tab-bar"},[s("ul",{staticClass:"navbar-nav"},[e.showNew?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"PageMessageCreate"}}},[s("div",{staticClass:"d-flex"},[s("span",[e._v("New")]),s("span",{staticClass:"d-flex align-content-center p-2"},[s("a",{staticClass:"tab-new",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-plus"})])])])])],1):e._e(),e._l(e.openMessages,(function(e){return s("TabItem",{key:e[".key"],attrs:{tabbedMessage:e}})}))],2)])])}),k=[],C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link d-flex",attrs:{to:{name:"PageMessageView",params:{messageId:this.tabbedMessage[".key"]}}}},[s("div",{staticClass:"d-flex"},[s("span",{staticClass:"d-flex p-2"},[s("i",{staticClass:"fa fa-envelope"})]),s("span",[e._v(e._s(this.tabbedMessage.subject))]),s("span",{staticClass:"d-flex align-content-center p-2"},[s("a",{staticClass:"tab-closer",on:{click:function(t){return t.preventDefault(),e.closeMessage(t)}}},[s("i",{staticClass:"fa fa-times"})])])])])],1)},_=[],I=(s("b0c0"),{name:"TabItem",props:{tabbedMessage:{required:!0,type:Object}},methods:{closeMessage:function(){this.$store.dispatch("closeMessage",this.tabbedMessage),"PageMessageView"===this.$route.name&&parseInt(this.$route.params.messageId,10)===parseInt(this.tabbedMessage[".key"],10)&&(this.$router.go(-1),this.$emit("tabClosed",this.tabbedMessage[".key"]))}}}),M=I,w=(s("c268"),Object(u["a"])(M,C,_,!1,null,"18d01814",null)),O=w.exports,A={name:"TheMessageTabBar",components:{TabItem:O},props:{openMessages:{required:!0,type:Array}},computed:{showNew:function(){return this.$store.state.userState.showNew}}},F=A,T=(s("073d"),Object(u["a"])(F,j,k,!1,null,"248a2422",null)),x=T.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{attrs:{id:"sidebar"}},[e._m(0),s("MessageFilterList",{attrs:{messageFilters:e.messageFilters}}),s("div",{staticClass:"message-list-header-item"},[e._v("Teams")]),s("MessageFilterList",{attrs:{messageFilters:e.teams}}),s("div",{staticClass:"message-list-header-item"},[e._v("Tools")]),s("MessageToolList",{attrs:{messageTools:e.messageTools}})],1)},$=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"navbar navbar-expand-md message-list-controls"},[s("h1",[e._v("Folders")])])}],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-unstyled components"},e._l(e.messageFilters,(function(e){return s("MessageFilterListItem",{key:e[".key"],attrs:{messageFilter:e}})})),1)},P=[],E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"message-filter-list-item"},[s("router-link",{attrs:{to:{name:"PageMessageListView",params:{listId:e.messageFilter[".key"]}}}},[s("span",{staticClass:"fa mr-3",class:e.messageFilter.faIcon}),e._v(" "+e._s(e.messageFilter.name)+" ")])],1)},R=[],L={name:"MessageFilterListItem",props:{messageFilter:{required:!0,type:Object}}},D=L,z=Object(u["a"])(D,E,R,!1,null,"c6efd804",null),q=z.exports,W={name:"MessageFilterList",components:{MessageFilterListItem:q},props:{messageFilters:{required:!0,type:Array}}},V=W,B=Object(u["a"])(V,S,P,!1,null,"02a8001e",null),U=B.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"list-unstyled components"},e._l(e.messageTools,(function(e){return s("MessageToolListItem",{key:e[".key"],attrs:{messageTool:e}})})),1)},H=[],J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"message-tool-list-item"},[s("a",{attrs:{href:"#"}},[s("span",{staticClass:"fa mr-3",class:e.messageTool.faIcon}),e._v(" "+e._s(e.messageTool.name))])])},N=[],Q={name:"MessageToolListItem",props:{messageTool:{required:!0,type:Object}}},G=Q,X=Object(u["a"])(G,J,N,!1,null,"27aa24a4",null),Z=X.exports,ee={name:"MessageToolList",components:{MessageToolListItem:Z},props:{messageTools:{required:!0,type:Array}}},te=ee,se=Object(u["a"])(te,Y,H,!1,null,"6572485e",null),ae=se.exports,ne={name:"TheMessageSidebar",components:{MessageToolList:ae,MessageFilterList:U},computed:{teams:function(){return Object.values(this.$store.state.messageFilters).filter((function(e){return"team"===e.type}))},messageFilters:function(){return Object.values(this.$store.state.messageFilters).filter((function(e){return"folder"===e.type}))},messageTools:function(){return Object.values(this.$store.state.messageTools)}}},ie=ne,re=(s("06d3"),Object(u["a"])(ie,K,$,!1,null,"53160277",null)),oe=re.exports,ce={name:"Messages",components:{TheMessageSidebar:oe,TheMessageTabBar:x},computed:{openMessages:function(){var e=this,t=[];return this.$store.state.messageMeta&&(t=Object.values(this.$store.state.messages).filter((function(t){var s=e.$store.state.messageMeta[t[".key"]];return!(!s||!s.isOpen)}))),t}},created:function(){this.$store.dispatch("fetchAllMessageFilters",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllTeams",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllMessageMetaForUser",{userId:this.$store.state.authId}).then((function(e){console.log(e)})),this.$store.dispatch("fetchAllUsers").then((function(e){console.log(e)}))}},le=ce,ue=(s("4907"),Object(u["a"])(le,b,y,!1,null,"46849076",null)),me=ue.exports,de=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-view-container"},[s("nav",{staticClass:"navbar navbar-expand-md message-bar"},[s("div",{staticClass:"back-button",on:{click:function(t){return e.back()}}},[s("span",{staticClass:"fa fa-arrow-left"})]),s("h1",[e._v(e._s(e.message.subject))]),e._l(e.teamRecipients,(function(e){return s("AppTeam",{key:e[".key"],attrs:{team:e}})})),s("div",{staticClass:"message-actions-container"},[s("ul",{staticClass:"message-actions"},[s("li",[s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#"},on:{click:e.doReply}},[s("i",{staticClass:"fa fa-reply"}),e._v(" Reply ")])]),s("li",[s("StatusPopper",{attrs:{status:e.messageStatus},on:{"change-message-status":e.changeMessageStatus}})],1)])])],2),e.assignable?s("div",[e._v(" Assignee "),e.isAssigned?s("span",[s("a",{attrs:{href:"#"}},[s("img",{staticClass:"avatar",attrs:{src:e.assignedUser.avatar}})])]):e.assignable?s("span",[e._m(0)]):e._e()]):e._e(),s("div",{staticClass:"message-view",attrs:{id:"message-view"}},[s("div",{staticClass:"reply-item"},[s("div",{staticClass:"media g-mb-30 media-comment"},[s("img",{staticClass:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",attrs:{src:e.from.avatar,alt:e.initials}}),s("div",{staticClass:"media-body u-shadow-v18 g-bg-secondary g-pa-30"},[s("div",{staticClass:"g-mb-15"},[s("h5",{staticClass:"h5 g-color-gray-dark-v1 mb-0"},[e._v(e._s(e.from.name))]),s("span",{staticClass:"g-color-gray-dark-v4 g-font-size-12"},[s("AppDate",{attrs:{timestamp:e.message.createdAt}})],1)]),s("p",{domProps:{innerHTML:e._s(e.message.body)}}),s("div",{staticClass:"attachments"},e._l(e.attachments,(function(e){return s("AttachmentItem",{key:e[".key"],attrs:{attachment:e}})})),1)])])]),s("ReplyList",{attrs:{message:e.message}}),e.isReplying?s("div",{staticClass:"message-editor"},[s("TextEditor",{on:{updateContent:function(t){e.replyText=t}}}),s("div",{staticClass:"message-editor-actions-container"},[s("ul",{staticClass:"message-editor-actions reply"},[s("li",[s("a",{staticClass:"submit-reply",on:{click:function(t){return e.submitReply()}}},[e._v("Send")])]),s("li",[s("a",{staticClass:"submit-reply",on:{click:function(t){return e.cancelReply()}}},[e._v("Cancel")])])])])],1):s("div",{staticClass:"message-editor"},[s("div",{staticClass:"message-editor-actions-container"},[s("ul",{staticClass:"message-editor-actions"},[s("li",[e.isReplying?e._e():s("a",{staticClass:"u-link-v5 g-color-gray-dark-v4 g-color-primary--hover",attrs:{href:"#"},on:{click:e.doReply}},[s("i",{staticClass:"fa fa-reply"}),e._v(" Reply ")])])])])])],1)])},fe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{attrs:{href:"#"}},[s("span",{staticClass:"avatar empty"})])}],pe=(s("a15b"),s("d81d"),s("b64b"),s("ac1f"),s("466d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{attrs:{title:e._f("humanFriendlyDate")(e.timestamp)}},[e._v(e._s(e._f("humanFriendlyDate")(e.timestamp)))])}),ge=[],he=s("c1df"),ve=s.n(he),be={name:"AppDate",props:{timestamp:{required:!0,type:String}},filters:{humanFriendlyDate:function(e){var t="",s=ve()().toISOString(),a=ve()(e).toISOString();return t=ve()(a).isSame(s,"hour")?ve()(a).fromNow():ve()(a).isSame(s,"day")?ve()(a).format("[Today at] h:mA"):ve()(a).isSame(s,"week")?ve()(a).format("ddd h:mA"):ve()(a).isSame(s,"month")||ve()(a).isSame(s,"year")?ve()(a).format("MMM D"):ve()(a).format("MMM D, YYYY"),t}}},ye=be,je=Object(u["a"])(ye,pe,ge,!1,null,"6bae160c",null),ke=je.exports,Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text-editor",on:{click:e.editorClicked}},[s("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.commands,a=e.isActive;return[s("div",{staticClass:"text-editor-menu-bar"},[s("ul",{staticClass:"button-bar"},[s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.bold}},[s("i",{staticClass:"fa fa-bold"})])]),s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.italic}},[s("i",{staticClass:"fa fa-italic"})])]),s("li",{staticClass:"item"},[s("a",{staticClass:"link",class:{"is-active":a.bold()},on:{click:t.underline}},[s("i",{staticClass:"fa fa-underline"})])])])])]}}])}),s("div",{ref:"editor",staticClass:"text-editor-textarea"},[s("editor-content",{attrs:{editor:e.editor}})],1)],1)},_e=[],Ie=s("cd42"),Me=s("f23d"),we={name:"TextEditor",components:{EditorContent:Ie["b"],EditorMenuBar:Ie["c"]},methods:{editorClicked:function(){this.editor.focus()}},data:function(){var e=this;return{editor:new Ie["a"]({content:"",autoFocus:!0,extensions:[new Me["a"],new Me["b"],new Me["c"]]}).on("update",(function(t){var s=t.getHTML,a=s();e.$emit("updateContent",a)}))}},beforeDestroy:function(){this.editor.destroy()}},Oe=we,Ae=(s("4b0f"),Object(u["a"])(Oe,Ce,_e,!1,null,"e45e5008",null)),Fe=Ae.exports,Te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"team badge"},[e._v("#"+e._s(e.team.name))])},xe=[],Ke={name:"AppTeam",props:{team:{required:!0,type:Object}}},$e=Ke,Se=(s("9fd2"),Object(u["a"])($e,Te,xe,!1,null,"7c81b827",null)),Pe=Se.exports,Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-list"},e._l(e.replies,(function(e){return s("ReplyListItem",{key:e[".key"],attrs:{reply:e}})})),1)},Re=[],Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reply-item"},[s("div",{staticClass:"media g-mb-30 media-comment"},[s("img",{staticClass:"d-flex g-width-50 g-height-50 rounded-circle g-mt-3 g-mr-15",attrs:{src:e.from.avatar,alt:e.from.name}}),s("div",{staticClass:"media-body u-shadow-v18 g-bg-secondary g-pa-30"},[s("div",{staticClass:"g-mb-15"},[s("h5",{staticClass:"h5 g-color-gray-dark-v1 mb-0"},[e._v(e._s(e.from.name))]),s("span",{staticClass:"g-color-gray-dark-v4 g-font-size-12"},[s("AppDate",{attrs:{timestamp:e.reply.createdAt}})],1)]),s("p",[e._v(e._s(e.reply.body))])])])])},De=[],ze={name:"ReplyListItem",components:{AppDate:ke},props:{reply:{required:!0,type:Object}},computed:{from:function(){return this.$store.state.users[this.reply.userId]}}},qe=ze,We=(s("58c9"),Object(u["a"])(qe,Le,De,!1,null,"26a537d2",null)),Ve=We.exports,Be={name:"ReplyList",components:{ReplyListItem:Ve},props:{message:{required:!0,type:Object}},computed:{replies:function(){var e=this;return this.message.replies?Object.keys(this.message.replies).map((function(t){return e.$store.state.replies[t]})):[]}}},Ue=Be,Ye=Object(u["a"])(Ue,Ee,Re,!1,null,"35dc4d46",null),He=Ye.exports,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"attachment badge",class:[e.attachment.type],on:{click:function(t){return t.stopPropagation(),e.viewAttachment()}}},[s("span",{staticClass:"fa attachment-name",class:e.icon}),e._v(" "),s("span",{staticClass:"attachment-name"},[e._v(e._s(e.attachment.name))])])},Ne=[],Qe={name:"AttachmentItem",props:{attachment:{required:!0,type:Object}},methods:{viewAttachment:function(){"document"===this.attachment.type?this.$router.push({name:"PagePDFVue",params:{attachmentId:this.attachment[".key"]}}):"patient"===this.attachment.type&&this.$store.dispatch("loadPatient",{pid:this.attachment.properties.pid})}},computed:{icon:function(){var e="fa-file";return"document"===this.attachment.type?e="fa-file":"patient"===this.attachment.type&&(e="fa-user"),e}}},Ge=Qe,Xe=(s("c1ad"),Object(u["a"])(Ge,Je,Ne,!1,null,"dde4427e",null)),Ze=Xe.exports,et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Popper",{ref:"popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"right"}}},[s("div",{staticClass:"popper"},e._l(e.statusOptions,(function(t){return s("StatusPopperItem",{key:t[".key"],attrs:{status:t},on:{"change-status":e.changeStatus}})})),1),e.clickText?s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[e._v(e._s(e.clickText))]):s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"status",class:this.status.iconClass,style:{color:this.status.color}})])])],1)},tt=[],st=s("526e"),at=s.n(st),nt=(s("a101"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"status-item",attrs:{href:"#"},on:{click:function(t){return e.changeStatus()}}},[s("span",{style:{color:e.statusColor}},[s("span",{class:e.statusIconClass}),e._v(" "+e._s(e.statusTitle)+" ")])])}),it=[],rt={name:"StatusPopperItem",props:{status:{required:!0,type:Object}},methods:{changeStatus:function(){this.$emit("change-status",this.status)}},computed:{statusColor:function(){return this.status.color},statusTitle:function(){return this.status.title},statusIconClass:function(){return this.status.iconClass}}},ot=rt,ct=Object(u["a"])(ot,nt,it,!1,null,"26713fa7",null),lt=ct.exports,ut={name:"StatusPopper",components:{StatusPopperItem:lt,Popper:at.a},props:{status:{required:!1,type:Object},clickText:{required:!1,type:String,default:""}},data:function(){return{currentStatus:"new"}},computed:{statusOptions:function(){return this.$store.state.messageOptions.statusOptions}},methods:{changeStatus:function(e){this.status=e,this.$refs.popper.doClose(),this.$emit("change-message-status",this.status)}}},mt=ut,dt=(s("2d60"),Object(u["a"])(mt,et,tt,!1,null,"64aa1bff",null)),ft=dt.exports,pt={name:"PageViewMessage",components:{StatusPopper:ft,AttachmentItem:Ze,ReplyList:He,TextEditor:Fe,AppDate:ke,AppTeam:Pe},props:{messageId:{required:!0,type:String}},data:function(){return{isReplying:!1,replyText:""}},computed:{messageStatus:function(){return this.$store.state.messageOptions.statusOptions[this.message.status]},attachments:function(){var e=this;if(this.message.attachments){var t=Object.keys(this.message.attachments),s=t.map((function(t){return e.$store.state.attachments[t]}));return s}return[]},message:function(){return this.$store.state.messages[this.messageId]},from:function(){return this.$store.state.users[this.message.userId]},isAssigned:function(){return null!==this.message.assignedTo},initials:function(){return this.from.name.match(/\b(\w)/g).join("").toUpperCase()},assignedUser:function(){var e=this.$store.state.users[this.message.assignedTo];return e},assignable:function(){return!0===this.message.assignable},meta:function(){return this.$store.state.messageMeta[this.messageId]},recipientsList:function(){var e=this;return Object.keys(this.message.recipients.users).map((function(t){return e.$store.state.users[t].name})).join(", ")},teamRecipients:function(){var e=this;return this.message.recipients.teams?Object.keys(this.message.recipients.teams).map((function(t){return e.$store.state.teams[t]})):[]}},methods:{doReply:function(){this.isReplying=!0;var e=document.getElementById("message-view");e.scrollTop=e.scrollHeight},markAsRead:function(){this.$store.dispatch("setMessageAsRead",{message:this.message,userId:this.$store.state.authId})},back:function(){this.$router.back()},changeMessageStatus:function(e){this.$store.dispatch("setMessageStatus",{message:this.message,status:e})},submitReply:function(){this.$store.dispatch("addReply",{message:this.message,text:this.replyText,userId:this.$store.state.authId}),this.isReplying=!1},cancelReply:function(){this.isReplying=!1}},mounted:function(){this.markAsRead()},created:function(){}},gt=pt,ht=(s("0944"),Object(u["a"])(gt,de,fe,!1,null,"4778b1cd",null)),vt=ht.exports,bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("MessageList",{attrs:{listId:e.listId,messages:e.messages}})},yt=[],jt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-list"},[s("div",{staticClass:"message-filters"},[s("div",[s("Popper",{ref:"select-all-options-popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"botttom"}}},[s("div",{staticClass:"popper"},[s("a",{staticClass:"select-all-options-item",attrs:{href:"#"}},[s("StatusPopper",{attrs:{clickText:e.bulkStatusText}})],1),s("a",{staticClass:"select-all-options-item",attrs:{href:"#"}},[s("span",{staticClass:"fa fa-archive"}),e._v(" Archive ")])]),s("a",{staticClass:"right",attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"btn select-all-options fa fa-caret-down"})])])],1),s("div",[s("a",{staticClass:"right",attrs:{href:"#"},on:{click:function(t){return e.onRefresh()}}},[s("span",{staticClass:"btn fa fa-sync"})])]),s("div",{staticClass:"search-container"},[s("form",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"Search...",name:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),s("i",{staticClass:"fa fa-search search-span"})])])]),s("div",{staticClass:"tableFixHead"},[s("table",{staticClass:"table message-list-table"},[s("thead",[s("tr",[s("th",{staticClass:"checkbox"},[s("div",{staticClass:"select-all-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectAll,expression:"selectAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectAll)?e._i(e.selectAll,null)>-1:e.selectAll},on:{click:e.select,change:function(t){var s=e.selectAll,a=t.target,n=!!a.checked;if(Array.isArray(s)){var i=null,r=e._i(s,i);a.checked?r<0&&(e.selectAll=s.concat([i])):r>-1&&(e.selectAll=s.slice(0,r).concat(s.slice(r+1)))}else e.selectAll=n}}})])]),s("th",{staticClass:"status"},[e._v("Status")]),s("th",{staticClass:"message"},[e._v("Message")]),s("th",{staticClass:"indicators"},[e._v("Indicators")]),s("th",{staticClass:"participants"},[e._v("Participants")]),s("th",{staticClass:"updated-date"}),s("th",{staticClass:"actions"})])]),s("tbody",e._l(e.filteredMesssages,(function(t){return s("MessageListItem",{key:t[".key"],attrs:{listId:e.listId,selected:e.selected,message:t},on:{"message-selected":e.onMessageSelected}})})),1)])])])},kt=[],Ct=(s("4160"),s("caad"),s("c975"),s("45fc"),s("a434"),s("25f0"),s("2532"),s("841c"),s("159b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",{staticClass:"message-list-item",class:{assignable:e.assignable,unread:e.unread}},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.iAmSelected,expression:"iAmSelected"}],attrs:{type:"checkbox",id:e.checkboxId},domProps:{value:e.messageId,checked:Array.isArray(e.iAmSelected)?e._i(e.iAmSelected,e.messageId)>-1:e.iAmSelected},on:{change:[function(t){var s=e.iAmSelected,a=t.target,n=!!a.checked;if(Array.isArray(s)){var i=e.messageId,r=e._i(s,i);a.checked?r<0&&(e.iAmSelected=s.concat([i])):r>-1&&(e.iAmSelected=s.slice(0,r).concat(s.slice(r+1)))}else e.iAmSelected=n},e.onCheck]}})]),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("StatusPopper",{attrs:{status:e.messageStatus},on:{"change-message-status":e.changeMessageStatus}})],1)])]),s("td",{staticClass:"view-details",on:{click:function(t){return e.viewMessage()}}},[s("div",{staticClass:"subject"},[s("span",[e._v(e._s(e.message.subject))]),e._l(e.tags,(function(e){return s("TagItem",{key:e[".key"],attrs:{tag:e}})}))],2),s("div",{staticClass:"preview"},[e._v(e._s(e.messagePreview))]),s("div",{staticClass:"attachments"},e._l(e.attachments,(function(e){return s("AttachmentItem",{key:e[".key"],attrs:{attachment:e}})})),1)]),s("td",{staticClass:"toolbar-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("span",{staticClass:"far fa-comment-alt"}),e._v(" "+e._s(e.replyCount))]),e.hasViewers?s("li",[s("span",{staticClass:"fa fa-eye",attrs:{title:e.viewersList}})]):s("li",[s("span")])])]),s("td",[s("div",[s("span",[e._v(e._s(e.fromName))])]),s("div",{staticClass:"actors"},[e._l(e.teamRecipients,(function(e){return s("AppTeam",{key:e[".key"],attrs:{team:e}})})),e._v(" "),s("span",{staticClass:"recipient-list"},[e._v(e._s(e.recipientsList))])],2)]),s("td",[s("span",[s("AppDate",{attrs:{timestamp:this.message.updatedAt}})],1)]),s("td",{staticClass:"actions-column"},[s("ul",{staticClass:"toolbar"},[s("li",[s("Popper",{ref:"popper",attrs:{trigger:"hover",stopPropagation:!0,options:{placement:"left"}}},[s("div",{staticClass:"popper"},[1==e.listId?s("a",{staticClass:"popper-item",on:{click:function(t){return e.moveToArchive()}}},[s("span",{staticClass:"fa fa-archive"}),e._v(" Archive")]):s("a",{staticClass:"popper-item",on:{click:function(t){return e.moveToInbox()}}},[s("span",{staticClass:"fa fa-inbox"}),e._v(" Inbox")]),e.unread?s("a",{staticClass:"popper-item",on:{click:function(t){return e.markAsRead()}}},[s("span",{staticClass:"fa fa-envelope-open"}),e._v(" Mark as Read")]):s("a",{staticClass:"popper-item",on:{click:function(t){return e.markAsUnread()}}},[s("span",{staticClass:"fas fa-envelope"}),e._v(" Mark as Unread")])]),s("a",{attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"message-item-more-actions fa fa-ellipsis-v"})])])],1)])])])}),_t=[],It=(s("fb6a"),s("5319"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"badge bg-gray"},[e._v(e._s(e.tag.name))])}),Mt=[],wt={name:"TagItem",props:{tag:{required:!0,type:Object}}},Ot=wt,At=Object(u["a"])(Ot,It,Mt,!1,null,"5652b663",null),Ft=At.exports,Tt={name:"MessageListItem",components:{StatusPopper:ft,Popper:at.a,AppTeam:Pe,AppDate:ke,AttachmentItem:Ze,TagItem:Ft},props:{message:{required:!0,type:Object},selected:{required:!1,type:Array},listId:{required:!0,type:String}},methods:{onCheck:function(){this.$emit("message-selected",this.message[".key"])},viewMessage:function(){this.$router.push({name:"PageMessageView",params:{messageId:this.message[".key"]}}),this.$store.dispatch("openMessage",this.message)},moveToArchive:function(){this.$store.dispatch("moveToList",{message:this.message,fromListId:this.listId,toListId:3,userId:this.$store.state.authId})},moveToInbox:function(){this.$store.dispatch("moveToList",{message:this.message,fromListId:this.listId,toListId:1,userId:this.$store.state.authId})},markAsRead:function(){this.$store.dispatch("setMessageAsRead",{message:this.message,userId:this.$store.state.authId})},markAsUnread:function(){this.$store.dispatch("setMessageAsUnread",{message:this.message,userId:this.$store.state.authId})},takeOwnership:function(){this.$store.dispatch("takeOwnership",{message:this.message,userId:this.$store.state.authId})},changeMessageStatus:function(e){this.$store.dispatch("setMessageStatus",{message:this.message,status:e})}},computed:{iAmSelected:{get:function(){return!(!this.selected||!this.selected.includes(this.messageId))},set:function(e){console.log(this.message[".key"]+": "+e)}},checkboxId:function(){return"checkbox-"+this.message[".key"]},meta:function(){return this.$store.state.messageMeta[this.messageId]},unread:function(){return!this.meta||!this.meta.isRead},messageId:function(){return this.message[".key"]},messageStatus:function(){return this.$store.state.messageOptions.statusOptions[this.message.status]},messagePreview:function(){var e=this.message.body.replace(/(<([^>]+)>)/gi," ");return e.length>80?e.slice(0,80)+"...":e},replyCount:function(){var e=0;return this.message.replies&&(e=Object.keys(this.message.replies).length),e},isAssigned:function(){return null!==this.message.assignedTo},assignedUser:function(){var e=this.$store.state.users[this.message.assignedTo];return e},assignable:function(){return!0===this.message.assignable},attachments:function(){var e=this;if(this.message.attachments){var t=Object.keys(this.message.attachments),s=t.map((function(t){return e.$store.state.attachments[t]}));return s}return[]},tags:function(){var e=this;if(this.message.tags){var t=Object.keys(this.message.tags).map((function(t){return e.$store.state.tags[t]}));return t}return[]},fromName:function(){return this.$store.state.users[this.message.userId].name},viewersList:function(){var e=this,t=[];this.message.viewers&&(t=Object.keys(this.message.viewers));var s="";s=t.length>1?" are viewing":" is viewing";var a=t.map((function(t){return e.$store.state.users[t].name})).join(", ");return a+s},hasViewers:function(){var e=[];return this.message.viewers&&(e=Object.keys(this.message.viewers)),e.length>0},recipientsList:function(){var e=this;return Object.keys(this.message.recipients).map((function(t){return e.$store.state.users[t].name})).join(", ")},teamRecipients:function(){var e=this;return this.message.teams?Object.keys(this.message.teams).map((function(t){return e.$store.state.teams[t]})):[]}}},xt=Tt,Kt=(s("e99c"),Object(u["a"])(xt,Ct,_t,!1,null,"2f1393a8",null)),$t=Kt.exports,St={name:"MessageList",components:{StatusPopper:ft,MessageListItem:$t,Popper:at.a},data:function(){return{page:1,search:"",selected:[],selectAll:!1}},props:{messages:{required:!0,type:Array},listId:{required:!0,type:String}},computed:{filteredMesssages:function(){var e=this,t=this.messages;if(this.search){var s=this.messages.filter((function(t){var s=Object.values(t);return s.some((function(t){var s=!1;return t&&("string"===typeof t&&t.includes(e.search)||t.toString(10).includes(e.search))&&(s=!0),s}))}));t=s}return t.sort((function(e,t){var s=ve()(e.updatedAt),a=ve()(t.updatedAt);return s.isBefore(a)?1:a.isBefore(s)?-1:0})),t},bulkStatusText:function(){return"Change Status ["+this.selected.length+" messages]"}},methods:{onRefresh:function(){this.$store.dispatch("fetchAllMessageFilters",{userId:this.$store.state.authId}).then((function(e){console.log(e)}))},onMessageSelected:function(e){Object.values(this.messages).forEach((function(t){t[".key"]===e&&console.log("id: "+e+' "'+t.subject+'"')}));var t=this.selected.indexOf(e);t>-1?this.selected.splice(t,1):this.selected.push(e)},select:function(){var e=this;console.log("select all"),this.selected=[],this.selectAll||Object.values(this.filteredMesssages).forEach((function(t){console.log("id: "+t[".key"]+' "'+t.subject+'"'),e.selected.push(t[".key"])}))}}},Pt=St,Et=(s("fcef"),Object(u["a"])(Pt,jt,kt,!1,null,"73d3853c",null)),Rt=Et.exports,Lt={name:"PageViewMessageList",components:{MessageList:Rt},props:{listId:{required:!0,type:String}},computed:{messages:function(){var e=this;return this.$store.state.messageFilters[this.listId]?Object.keys(this.$store.state.messageFilters[this.listId].messages).map((function(t){return e.$store.state.messages[t]})):[]}}},Dt=Lt,zt=Object(u["a"])(Dt,bt,yt,!1,null,"627cd5b3",null),qt=zt.exports,Wt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message-view-container"},[s("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],staticClass:"form-input",attrs:{placeholder:"Subject...",type:"text",id:"message-subject",name:"subject"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("FieldUserSelect",{on:{updateRecipients:function(t){e.recipients=t}}})],1),s("div",{staticClass:"form-group"},[s("TextEditor",{on:{updateContent:function(t){e.body=t}}})],1),e._m(0)])])},Vt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-ghost"},[e._v("Cancel")]),s("button",{staticClass:"btn btn-blue",attrs:{type:"submit",name:"Publish"}},[e._v("Publish ")])])}],Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-select"},[s("vue-tags-input",{staticClass:"tags-input",attrs:{placeholder:"Select users or teams",tags:e.tags,"allow-edit-tags":!1,"autocomplete-items":e.filteredUsers},on:{"tags-changed":e.updateRecipients},scopedSlots:e._u([{key:"autocomplete-item",fn:function(t){return s("div",{staticClass:"my-item",on:{click:function(e){return t.performAdd(t.item)}}},[s("img",{staticClass:"avatar",attrs:{src:t.item.avatar}}),e._v(" "+e._s(t.item.text)+" ")])}},{key:"tag-left",fn:function(e){return s("div",{staticClass:"my-tag-left",on:{click:function(t){return e.performOpenEdit(e.index)}}},[s("img",{staticClass:"tag avatar",attrs:{src:e.tag.avatar}})])}}]),model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1)},Ut=[],Yt=s("c7a0"),Ht=s.n(Yt),Jt={name:"FieldUserSelect",components:{VueTagsInput:Ht.a},props:{users:{required:!1,type:Array}},data:function(){return{tag:"",separators:[";",","],tags:[]}},methods:{updateRecipients:function(e){this.tags=e,this.$emit("updateRecipients",this.tags)}},computed:{filteredUsers:function(){return Object.values(this.$store.state.users).map((function(e){return{text:e.username,avatar:e.avatar,id:e[".key"]}}))}}},Nt=Jt,Qt=(s("57d5"),Object(u["a"])(Nt,Bt,Ut,!1,null,"ff9b0bf2",null)),Gt=Qt.exports,Xt={name:"PageMessageCreate",components:{FieldUserSelect:Gt,TextEditor:Fe},data:function(){return{subject:"",body:"",recipients:[],attachments:[]}},methods:{save:function(){var e=this,t={subject:this.subject,body:this.body,recipients:this.recipients};this.$emit("save",{message:t}),this.$store.dispatch("createMessage",t).then((function(t){e.$router.push({name:"PageMessageView",params:{messageId:t[".key"]}}),e.$store.dispatch("openMessage",t)}))}}},Zt=Xt,es=(s("7ba5"),Object(u["a"])(Zt,Wt,Vt,!1,null,"89d81966",null)),ts=es.exports,ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fullscreen"},[s("nav",{staticClass:"navbar navbar-dark sticky-top"},[s("h1",{staticClass:"navbar-brand"},[e._v(e._s(e.filename))]),s("ul",{staticClass:"nav navbar-nav ml-auto"},[e.isEditMode?s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doView()}}},[s("span",{staticClass:"fas fa-eye"})])]):s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.doEdit()}}},[s("span",{staticClass:"fas fa-edit"})])]),s("li",[s("Popper",{ref:"download-popper",attrs:{trigger:"clickToToggle",stopPropagation:!0,options:{placement:"bottom"}}},[s("div",{staticClass:"popper"},[s("a",{staticClass:"popper-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadPdfWithAxios()}}},[e._v("PDF")]),s("a",{staticClass:"popper-item",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.downloadDocWithAxios()}}},[e._v("MS Word")])]),s("a",{attrs:{slot:"reference",href:"#"},slot:"reference"},[s("span",{staticClass:"fas fa-download"})])])],1),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$refs.pdf[0].print()}}},[s("span",{staticClass:"fas fa-print"})])]),s("li",[s("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.closeFile()}}},[s("span",{staticClass:"fas fa-times"})])])])]),s("div",{staticClass:"canvas-container"},[e.isEditMode?s("div",[s("tinymce",{ref:"tinymce",attrs:{id:"tinymce-editor",value:e.editorContent,plugins:e.plugins,toolbar1:e.toolbar1,toolbar2:e.toolbar2,other_options:e.tinyOptions},on:{"on-save":e.save}})],1):s("div",e._l(e.numPages,(function(t){return s("pdf",{key:t,ref:"pdf",refInFor:!0,staticClass:"canvas",attrs:{src:e.pdfFile.properties.url,page:t}})})),1)])])},as=[],ns=(s("3ca3"),s("ddb0"),s("2b3d"),s("858e")),is=s("bc3a"),rs=s.n(is),os=s("2cbf"),cs="",ls={components:{tinymce:os["a"],pdf:ns["a"],Popper:at.a},props:{attachmentId:{required:!0,type:String},edit:{type:Boolean,default:!1}},data:function(){return{isEditMode:!1,numPages:void 0,editorContent:"",tinyOptions:{height:"600px",width:"100%",menubar:!1},plugins:["save advlist autolink lists image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar1:"save | undo redo | formatselect | bold italic backcolor forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",toolbar2:""}},computed:{attachment:function(){return this.$store.state.attachments[this.attachmentId]},pdfFile:function(){return this.getFileOfType("pdf")},htmlFile:function(){return this.getFileOfType("html")},docFile:function(){var e=this.getFileOfType("doc");return e||(e=this.getFileOfType("docx")),e},htmlValue:function(){return""},filename:function(){return this.attachment.name}},watch:{isEditMode:function(e){var t=this;!1===e&&this.pdfFile.properties.url?(cs=ns["a"].createLoadingTask(this.pdfFile.properties.url),cs.promise.then((function(e){t.numPages=e.numPages}))):!0===e&&this.htmlFile.properties.url&&rs.a.get(this.htmlFile.properties.url).then((function(e){t.editorContent=e.data}))}},methods:{getFileOfType:function(e){var t=this,s=null;return Object.values(this.attachment.files).forEach((function(a){var n=t.$store.state.files[a];(n.type===e&&n.revision===t.attachment.revision||n.type===e&&n.revision===t.attachment.revision)&&(s=n)})),s},closeFile:function(){this.$router.back()},doEdit:function(){this.isEditMode=!0},doView:function(){this.isEditMode=!1},save:function(e){this.editorContent=e,this.$store.dispatch("pushHtml",{file:this.htmlFile,content:e}).then((function(e){console.log("revision is now at:"+e.revision)}))},forceFileDownload:function(e,t){var s=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=s,a.setAttribute("download",this.filename+"."+t),document.body.appendChild(a),a.click()},downloadPdfWithAxios:function(){var e=this;rs()({method:"get",url:this.pdfFile.properties.url,responseType:"arraybuffer"}).then((function(t){e.forceFileDownload(t,e.pdfFile.type)})).catch((function(e){console.log(e)}))},downloadDocWithAxios:function(){var e=this;rs()({method:"get",url:this.docFile.properties.url,responseType:"arraybuffer"}).then((function(t){e.forceFileDownload(t,e.docFile.type)})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;this.isEditMode=this.edit,!1===this.isEditMode&&this.pdfFile.properties.url?(cs=ns["a"].createLoadingTask(this.pdfFile.properties.url),cs.promise.then((function(t){e.numPages=t.numPages}))):!0===this.isEditMode&&this.htmlFile.properties.url&&rs.a.get(this.htmlFile.properties.url).then((function(t){e.editorContent=t.data}))}},us=ls,ms=(s("3bc2"),Object(u["a"])(us,ss,as,!1,null,"4f951874",null)),ds=ms.exports;a["a"].use(v["a"]);var fs=[{path:"/",redirect:"/messages/list/1"},{path:"/about",name:"About",component:function(){return s.e("about").then(s.bind(null,"f820"))}},{path:"/attachment/edit/:attachmentId",name:"PagePDFEdit",component:ds,props:!0},{path:"/attachment/:attachmentId",name:"PagePDFVue",component:ds,props:!0},{path:"/messages",name:"PageMessages",component:me,children:[{path:"message/:messageId",name:"PageMessageView",component:vt,props:!0},{path:"message/create",name:"PageMessageCreate",component:ts},{path:"list/:listId",name:"PageMessageListView",component:qt,props:!0}]}],ps=new v["a"]({mode:"history",base:"/openemr/interface/modules/custom_modules/oe-mi-messages/client/dist/",routes:fs}),gs=ps,hs=s("5530"),vs=s("2f62"),bs=s("5033");a["a"].use(vs["a"]);var ys="/openemr",js=new vs["a"].Store({state:Object(hs["a"])({},bs,{userState:{openTabs:{},activeFilter:"1"},messageOptions:{statusOptions:{new:{".key":"new",color:"#3e5e8e",iconClass:"far fa-check-circle",title:"New"},"in-progress":{".key":"in-progress",color:"#c8bc4d",iconClass:"fas fa-check-circle",title:"In-Progress"},complete:{".key":"complete",color:"#17d923",iconClass:"fas fa-check-circle",title:"Complete"}}},messageMeta:{},jobs:{},attachments:{},files:{},messageFilters:{},messageTools:{},messages:{},replies:{},authId:"4"}),actions:{loadPatient:function(e,t){e.commit,e.state;var s=t.pid;top.restoreSession(),top.RTop.location=ys+"/interface/patient_file/summary/demographics.php?set_pid="+encodeURIComponent(s)},openMessage:function(e,t){var s=e.commit,a=e.state,n=t[".key"];return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!open_message",{params:{userId:a.authId,messageId:n}}).then((function(e){var t=e.data;s("setMessageMeta",{messageMeta:t,messageId:n})}))},closeMessage:function(e,t){var s=e.commit,a=e.state,n=t[".key"];return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!close_message",{params:{userId:a.authId,messageId:n}}).then((function(e){var t=e.data;s("setMessageMeta",{messageMeta:t,messageId:n})}))},takeOwnership:function(e,t){e.commit,t.message,t.userId},moveToList:function(e,t){var s=e.commit,a=t.message,n=t.fromListId,i=t.toListId,r=t.userId;return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!move_message",{params:{fromFilterId:n,toFilterId:i,userId:r,messageId:a[".key"]}}).then((function(e){return s("removeMessageFromFilter",{messageId:a[".key"],filterId:n}),s("appendMessageToFilter",{messageId:a[".key"],filterId:i}),e.data}))},setMessageAsRead:function(e,t){e.commit;var s=e.dispatch,a=t.message,n=t.userId,i={};this.state.messageMeta[a[".key"]]&&(i=this.state.messageMeta[a[".key"]]),i.isRead=1,s("setMessageMeta",{message:a,userId:n,meta:i})},setMessageAsUnread:function(e,t){e.commit;var s=e.dispatch,a=t.message,n=t.userId,i={};this.state.messageMeta[a[".key"]]&&(i=this.state.messageMeta[a[".key"]]),i.isRead=0,s("setMessageMeta",{message:a,userId:n,meta:i})},setMessageMeta:function(e,t){var s=e.commit,a=t.message,n=t.userId,i=t.meta;return rs.a.post(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php",{action:"message!set_message_meta",meta:i,userId:n,messageId:a[".key"]}).then((function(e){var t=e.data;return s("setMessageMeta",{messageMeta:Object(hs["a"])({},t,{".key":t.messageId}),messageId:t.messageId}),e.data}))},setMessageStatus:function(e,t){var s=e.commit,a=(e.state,t.message),n=t.status;return a.status=n[".key"],rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!set_message_status",{params:{status:a.status,messageId:a[".key"]}}).then((function(e){return s("setMessage",{message:a,messageId:a[".key"]}),e.data}))},addReply:function(e,t){var s=e.commit,a=(e.state,t.message),n=t.text,i=t.userId;return rs()({url:ys+"/interface/modules/custom_modules/oe-mi-messages/index.php",method:"post",data:{action:"message!add_reply_to_message",body:n,messageId:a[".key"],userId:i}}).then((function(e){var t=Object(hs["a"])({},e.data,{".key":e.data.id});return s("setReply",{reply:t,replyId:t[".key"]}),s("appendReplyToMessage",{messageId:a[".key"],replyId:t[".key"]}),t}))},createMessage:function(e,t){var s=e.commit,a=e.state,n="greatMessage"+Math.random();return t[".key"]=n,t.userId=a.authId,t.createdAt=Math.floor(Date.now()/1e3),s("setMessage",{message:t,messageId:n}),s("appendMessageToUserSent",{userId:t.userId,messageId:n}),Promise.resolve(a.messages[n])},fetchPreview:function(e,t){var s=e.state,a=e.commit,n=t.attachment;return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!fetch_pdf",{params:{attachmentId:n[".key"]}}).then((function(e){var t=e.data;return a("setFile",{file:Object(hs["a"])({},t,{".key":t.id}),fileId:t.id}),s.files[t.id]}))},fetchHtml:function(e,t){var s=e.state,a=e.commit,n=t.attachment;return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=file!fetch_html",{params:{attachmentId:n[".key"]}}).then((function(e){var t=e.data;return a("setFile",{file:Object(hs["a"])({},t,{".key":t.id}),fileId:t.id}),s.files[t.id]}))},pushHtml:function(e,t){e.state;var s=e.commit,a=t.file,n=t.content;return rs()({url:ys+"/interface/modules/custom_modules/oe-mi-messages/index.php",method:"post",data:{action:"file!push_html",fileId:a[".key"],content:n}}).then((function(e){var t=e.data,a={};t.files.forEach((function(e){e.revision===t.revision&&(a[e.id]=e.id,s("setFile",{file:Object(hs["a"])({},e,{".key":e.id}),fileId:e.id}))}));var n=Object(hs["a"])({},t,{".key":t.id,files:a});return s("setAttachment",{attachment:n,attachmentId:t.id}),n}))},fetchMessage:function(e,t){var s=e.state,a=e.commit,n=t.messageId;return new Promise((function(e,t){rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_message",{params:{id:n}}).then((function(t){var n=t.data,i={};n.attachments.forEach((function(e){i[e.id]=e.id}));var r={},o=null;a("setMessage",{message:Object(hs["a"])({},n,{".key":n.id,attachments:i,recipients:r,assignedTo:o}),messageId:n.id}),e(s.messages[n.id])}))}))},fetchAllTeams:function(e,t){e.state;var s=e.commit,a=t.userId;return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_teams",{params:{userId:a}}).then((function(e){var t=Object.values(e.data);return t.forEach((function(e){s("setTeam",{team:Object(hs["a"])({},e,{".key":e.id}),teamId:e.id})})),t}))},fetchAllMessageMetaForUser:function(e,t){var s=e.state,a=e.commit,n=t.userId;return new Promise((function(e,t){rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_message_meta_for_user",{params:{userId:n}}).then((function(t){var n=t.data;Object.values(n).forEach((function(e){a("setMessageMeta",{messageMeta:Object(hs["a"])({},e,{".key":e.messageId}),messageId:e.messageId})})),e(s.messageMeta)}))}))},fetchAllMessageFilters:function(e,t){var s=e.state,a=e.commit,n=t.userId;return window.addEventListener("unhandledrejection",(function(e){console.log(e)})),rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_message_filters",{params:{userId:n}}).then((function(e){var t=Object.values(e.data);return t.forEach((function(e){var t={};e.messages.forEach((function(e){t[e.id]=e.id})),a("setMessageFilter",{messageFilter:Object(hs["a"])({},e,{".key":e.id,messages:t}),messageFilterId:e.id}),e.messages.forEach((function(e){var t={};e.teams.forEach((function(e){t[e.id]=e.id}));var s=e.recipients;e.recipients.forEach((function(e){s[e.id]=e.id}));var n=null,i={};e.attachments.forEach((function(e){var t={};e.files.forEach((function(e){t[e.id]=e.id,a("setFile",{file:Object(hs["a"])({},e,{".key":e.id}),fileId:e.id})})),i[e.id]=e.id,a("setAttachment",{attachment:Object(hs["a"])({},e,{".key":e.id,files:t}),attachmentId:e.id})}));var r={};e.replies.forEach((function(e){r[e.id]=e.id,a("setReply",{reply:Object(hs["a"])({},e,{".key":e.id}),replyId:e.id})})),a("setMessage",{message:Object(hs["a"])({},e,{".key":e.id,teams:t,recipients:s,attachments:i,replies:r,assignedTo:n}),messageId:e.id})}))})),s.messageFilters})).catch((function(e){console.error(e)}))},fetchMessagesForFilter:function(e,t){e.state;var s=e.commit,a=t.filterId,n=t.userId;return rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_messages",{params:{userId:n,filterId:a}}).then((function(e){var t=Object.values(e.data);t.forEach((function(e){var t={users:{2:"2",3:"3"},teams:{}},a=null,n={};e.attachments.forEach((function(e){n[e.id]=e.id})),s("setMessage",{message:Object(hs["a"])({},e,{".key":e.id,recipients:t,attachments:n,assignedTo:a}),messageId:e.id}),e.attachments.forEach((function(e){s("setAttachment",{attachment:Object(hs["a"])({},e,{".key":e.id}),attachmentId:e.id})}))}))}))},fetchAllUsers:function(e){var t=e.state,s=e.commit;return new Promise((function(e,a){rs.a.get(ys+"/interface/modules/custom_modules/oe-mi-messages/index.php?action=message!fetch_all_users").then((function(a){var n=Object.values(a.data);n.forEach((function(e){s("setUser",{user:Object(hs["a"])({},e,{".key":e.id}),userId:e.id})})),e(t.users)}))}))}},mutations:{setJob:function(e,t){var s=t.job,n=t.jobId;a["a"].set(e.jobs,n,s)},setFile:function(e,t){var s=t.file,n=t.fileId;a["a"].set(e.files,n,s)},setMessage:function(e,t){var s=t.message,n=t.messageId;a["a"].set(e.messages,n,s)},setMessageMeta:function(e,t){var s=t.messageMeta,n=t.messageId;a["a"].set(e.messageMeta,n,s)},setReply:function(e,t){var s=t.reply,n=t.replyId;a["a"].set(e.replies,n,s)},setTeam:function(e,t){var s=t.team,n=t.teamId;a["a"].set(e.teams,n,s)},appendReplyToMessage:function(e,t){var s=t.messageId,n=t.replyId,i=e.messages[s];i.replies||a["a"].set(i,"replies",{}),a["a"].set(i.replies,n,n)},setUser:function(e,t){var s=t.user,n=t.userId;a["a"].set(e.users,n,s)},setAttachment:function(e,t){var s=t.attachment,n=t.attachmentId;a["a"].set(e.attachments,n,s)},setMessageFilter:function(e,t){var s=t.messageFilter,n=t.messageFilterId;a["a"].set(e.messageFilters,n,s)},appendMessageToUserSent:function(e,t){var s=t.messageId,n=t.userId,i=e.users[n];i.sent||a["a"].set(i,"sent",{}),a["a"].set(i.sent,s,s)},appendMessageToFilter:function(e,t){var s=t.messageId,n=t.filterId;a["a"].set(e.messageFilters[n].messages,s,s)},removeMessageFromFilter:function(e,t){var s=t.messageId,n=t.filterId;a["a"].delete(e.messageFilters[n].messages,s)},appendMessageToOpenMessages:function(e,t){t.message;var s=t.messageId;a["a"].set(e.messageMeta[s],s,s)},removeMessageFromOpenMessages:function(e,t){t.message;var s=t.messageId;a["a"].delete(e.userState.openTabs,s,s)}},modules:{}});a["a"].config.productionTip=!1,new a["a"]({router:gs,store:js,render:function(e){return e(h)}}).$mount("#app")},"57d5":function(e,t,s){"use strict";var a=s("ad29"),n=s.n(a);n.a},"58c9":function(e,t,s){"use strict";var a=s("3b82"),n=s.n(a);n.a},"5c0b":function(e,t,s){"use strict";var a=s("9c0c"),n=s.n(a);n.a},6496:function(e,t,s){},"7ba5":function(e,t,s){"use strict";var a=s("55aa"),n=s.n(a);n.a},"8abc":function(e,t,s){},"980f":function(e,t,s){},"9c0c":function(e,t,s){},"9fd2":function(e,t,s){"use strict";var a=s("e2a1"),n=s.n(a);n.a},a913:function(e,t,s){},ad29:function(e,t,s){},c1ad:function(e,t,s){"use strict";var a=s("6496"),n=s.n(a);n.a},c268:function(e,t,s){"use strict";var a=s("8abc"),n=s.n(a);n.a},d5ef:function(e,t,s){},d828:function(e,t,s){},ddbb:function(e,t,s){},e2a1:function(e,t,s){},e99c:function(e,t,s){"use strict";var a=s("4ec2"),n=s.n(a);n.a},fcef:function(e,t,s){"use strict";var a=s("ddbb"),n=s.n(a);n.a}});
//# sourceMappingURL=app.973ed862.js.map